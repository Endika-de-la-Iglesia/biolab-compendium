{"version":3,"file":"787-5dacc298693d115df024.js","mappings":"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","sources":["webpack://biolab-compendium/./env.js","webpack://biolab-compendium/./src/components/helpers/jwt-decoder.js","webpack://biolab-compendium/./src/components/navigation/NavBar.js","webpack://biolab-compendium/./src/components/navigation/SearchBar.js","webpack://biolab-compendium/./src/components/BottomBar.js","webpack://biolab-compendium/./src/components/navigation/TravelToTop.js","webpack://biolab-compendium/./src/components/Home.js","webpack://biolab-compendium/./src/components/authentication/Login.js","webpack://biolab-compendium/./src/components/helpers/useTokenValidation.js","webpack://biolab-compendium/./src/components/Modal/DeletionModal.js","webpack://biolab-compendium/./src/components/protocols/ProtocolsContainer.js","webpack://biolab-compendium/./src/components/authentication/EmailSent.js","webpack://biolab-compendium/./src/components/users/UsersManagement.js","webpack://biolab-compendium/./src/components/users/AccountManagement.js","webpack://biolab-compendium/./src/components/helpers/dropzone-component.js","webpack://biolab-compendium/./src/components/helpers/reactives-concentration-helper.js","webpack://biolab-compendium/./src/components/helpers/MyEditor.js","webpack://biolab-compendium/./src/components/protocols/ProtocolForm.js","webpack://biolab-compendium/./src/components/protocols/ProtocolsProtocol.js","webpack://biolab-compendium/./src/components/helpers/usePrint.js","webpack://biolab-compendium/./src/components/AppInitializer.js"],"sourcesContent":["const ENV = process.env.NODE_ENV || \"development\"; \n\nconst dev = {\n  apiUrl: \"http://localhost:8080\",\n  devServer: {\n    host: \"localhost\",\n    port: 3000,\n  },\n};\n\n// const prod = {\n//   apiUrl: \"https://api.myproductiondomain.com\",\n//   devServer: {\n//     host: \"myproductiondomain.com\",\n//     port: 80,\n//   },\n// };\n\nconst test = {\n  apiUrl: \"http://localhost:8081\",\n  devServer: {\n    host: \"localhost\",\n    port: 3001,\n  },\n};\n\nconst config = {\n  development: dev,\n  production: prod,\n  test: test,\n};\n\nmodule.exports = config[ENV];\n","import { jwtDecode } from \"jwt-decode\";\r\nimport axios from \"axios\";\r\nconst config = require(\"../../../env\");\r\n\r\nconst getUserInfoFromToken = async () => {\r\n  const token = localStorage.getItem(\"authToken\");\r\n  const apiUrl = config.apiUrl;\r\n\r\n  if (token) {\r\n    try {\r\n      const decodedToken = jwtDecode(token);\r\n      const currentTime = Date.now() / 1000;\r\n\r\n      if (decodedToken.exp < currentTime) {\r\n        localStorage.removeItem(\"authToken\");\r\n        return null;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(\r\n          `${apiUrl}/api/auth/user/${decodedToken.id}`\r\n        );\r\n        if (response.data) {\r\n          return { userInfo: decodedToken, token: token };\r\n        }\r\n      } catch (error) {\r\n        localStorage.removeItem(\"authToken\");\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      localStorage.removeItem(\"authToken\");\r\n      return null;\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nconst isAuthenticated = async () => {\r\n  const userInfo = await getUserInfoFromToken();\r\n  return !!userInfo;\r\n};\r\n\r\nexport { getUserInfoFromToken, isAuthenticated };\r\n","import React from \"react\";\r\nimport { NavLink, Link } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { logout } from \"../../actions/authAction\";\r\n\r\nexport default function NavBar() {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { role, isAuthenticated } = useSelector(\r\n    (state) => state.auth\r\n  );\r\n\r\n  const classIsActive = ({ isActive }) =>\r\n    isActive ? \"nav-link-active\" : \"nav-link-inactive\";\r\n\r\n  const handleLogOut = () => {\r\n    localStorage.removeItem(\"authToken\");\r\n    dispatch(logout());\r\n    navigate(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"navbar-wrapper\">\r\n      <div className=\"logo\">\r\n        <Link to=\"/\">\r\n          <img src=\"/assets/images/logo.png\" alt=\"logo\" />\r\n        </Link>\r\n      </div>\r\n\r\n      <div className=\"navlinks-wrapper\">\r\n        <NavLink to=\"/\" className={classIsActive}>\r\n          Inicio\r\n        </NavLink>\r\n        <NavLink to=\"/protocols/all-categories\" className={classIsActive}>\r\n          Explora\r\n        </NavLink>\r\n\r\n        {isAuthenticated ? (\r\n          <NavLink to=\"/favourites/all-categories\" className={classIsActive}>\r\n            Favoritos\r\n          </NavLink>\r\n        ) : null}\r\n\r\n        {role === \"admin\" && isAuthenticated ? (\r\n          <NavLink to=\"/users-management\" className={classIsActive}>\r\n            Usuarios\r\n          </NavLink>\r\n        ) : null}\r\n\r\n        {isAuthenticated ? (\r\n          <div className=\"logged-in-user\">\r\n            <div className=\"user-icon\">\r\n              <div className=\"activity-icon\">\r\n                <Link to=\"/account-management\">\r\n                  <FontAwesomeIcon icon=\"fa-user\" size=\"lg\" />\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            <div className=\"logout-icon\" onClick={handleLogOut}>\r\n              <div className=\"activity-icon\">\r\n                <FontAwesomeIcon icon=\"fa-right-from-bracket\" size=\"lg\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"login-icon\">\r\n            <NavLink to=\"/login\" className={classIsActive}>\r\n              <div className=\"activity-icon\">\r\n                <FontAwesomeIcon icon=\"fa-right-to-bracket\" size=\"xl\" />\r\n              </div>\r\n            </NavLink>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nconst SearchBar = ({ onSearch }) => {\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  const handleFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    setQuery(\"\");\r\n    onSearch(query);\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-bar-wrapper\">\r\n      <form className=\"search-bar\" onSubmit={handleFormSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Escribir aquí términos de búsqueda\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n        />\r\n        <button className=\"btn\" type=\"submit\">\r\n          Buscar\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBar;\r\n","import React from 'react'\r\n\r\nexport default function BottomBar() {\r\n  return (\r\n    <div className=\"bottom-wrapper\">\r\n      <span>\r\n        <span className=\"bold\">{new Date().getFullYear()} || </span>\r\n        Endika de la Iglesia\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nexport default function TravelToTop() {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  // Show or hide the button based on scroll position\r\n  useEffect(() => {\r\n    const toggleVisibility = () => {\r\n      if (window.scrollY > 40) {\r\n        setIsVisible(true);\r\n      } else {\r\n        setIsVisible(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", toggleVisibility);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", toggleVisibility);\r\n    };\r\n  }, []);\r\n\r\n  const scrollToTop = () => {\r\n    window.scrollTo({\r\n      top: 0,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {isVisible ? (\r\n        <button\r\n          onClick={scrollToTop}\r\n          style={{\r\n            position: \"fixed\",\r\n            bottom: \"20px\",\r\n            right: \"20px\",\r\n            backgroundColor: \"#B25EF3\",\r\n            color: \"#F9F3FE\",\r\n            border: \"none\",\r\n            borderRadius: \"50%\",\r\n            padding: \"10px 15px\",\r\n            cursor: \"pointer\",\r\n            boxShadow: \"0px 4px 6px rgba(0, 0, 0, 0.1)\",\r\n            zIndex: 1000,\r\n          }}\r\n        >\r\n          &#8679;\r\n        </button>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport NavBar from \"./navigation/NavBar\";\nimport SearchBar from \"./navigation/SearchBar\";\nimport BottomBar from \"./BottomBar\";\nimport { Link } from \"react-router-dom\";\nimport TravelToTop from \"./navigation/TravelToTop\";\n\nfunction Home() {\n  const featuredCategories = {\n    \"Biomoléculas-DNA\": \"/assets/images/adn.jpg\",\n    \"Biomoléculas-Proteínas\": \"/assets//images/proteína.jpg\",\n    Microbiología: \"/assets/images/microbiología.jpg\",\n    \"Cultivos celulares\": \"/assets/images/célula_eucariota.jpg\",\n  };\n\n  const navigate = useNavigate();\n\n  const handleSearch = (query) => {\n    navigate(`/protocols?search=${query}`);\n  };\n\n  function featuredCategoryRender() {\n    const featuredCategoryElements = Object.entries(featuredCategories).map(\n      ([category, url]) => {\n        return (\n          <div className=\"featured-category\" key={category}>\n            <Link\n              to={{\n                pathname: `/protocols/${category}`,\n              }}\n            >\n              <div className=\"featured-category-img\">\n                <img src={url} alt={`Image for ${category}`} />\n              </div>\n              <div className=\"featured-category-txt\">{category}</div>\n            </Link>\n          </div>\n        );\n      }\n    );\n    return (\n      <div className=\"featured-categories-wrapper\">\n        {featuredCategoryElements}\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"home-wrapper\">\n      <TravelToTop />\n\n      <div className=\"home-top-wrapper\">\n        <NavBar />\n      </div>\n\n      <div\n        className=\"home-info-wrapper\"\n        style={{\n          backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(\"/assets/images/home-background.jpg\")`,\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\",\n        }}\n      >\n        <p>\n          ¡Bienvenido a BioLab Compendium! Aquí encontrarás una selección de\n          protocolos de laboratorio. Prueba a buscar un término de interés o a\n          explorar las diferentes categorías.\n        </p>\n      </div>\n\n      <div className=\"home-search-featured-wrapper\">\n        <SearchBar onSearch={handleSearch} />\n\n        {featuredCategoryRender()}\n      </div>\n\n      <BottomBar />\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setUserInfo } from \"../../actions/authAction\";\r\nconst config = require(\"../../../env\");\r\n\r\nimport NavBar from \"../navigation/NavBar\";\r\nimport BottomBar from \"../BottomBar\";\r\nimport TravelToTop from \"../navigation/TravelToTop\";\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const apiUrl = config.apiUrl;\r\n\r\n  const [loginPasswordVisible, setLoginPasswordVisible] = useState(false);\r\n  const [registrationPasswordVisible, setRegistrationPasswordVisible] =\r\n    useState(false);\r\n\r\n  const companyDomains = {\r\n    Google: \"gmail.com\",\r\n  };\r\n\r\n  const [loginForm, setLoginForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const [registrationForm, setRegistrationForm] = useState({\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    company: \"no\",\r\n  });\r\n\r\n  const validateEmailDomain = (email) => {\r\n    const domain = email.split(\"@\")[1];\r\n    return domain === companyDomains[registrationForm.company];\r\n  };\r\n\r\n  const passwordRegex =\r\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*?&¿!#^])[A-Za-z\\d@$!%*?&¿!#^]{10,100}$/;\r\n\r\n  const checkPasswordRequirements = (password) => {\r\n    return passwordRegex.test(password);\r\n  };\r\n\r\n  const handleLoginChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setLoginForm({\r\n      ...loginForm,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleRegistrationChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setRegistrationForm({\r\n      ...registrationForm,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleLoginFormSubmission = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post(\r\n        `${apiUrl}/api/auth/login`,\r\n        loginForm\r\n      );\r\n      const data = response.data;\r\n      localStorage.setItem(\"authToken\", data.token);\r\n\r\n      const decodedToken = jwtDecode(data.token);\r\n      dispatch(\r\n        setUserInfo({\r\n          id: decodedToken.id,\r\n          role: decodedToken.role,\r\n          company: decodedToken.company,\r\n          username: decodedToken.username,\r\n          email: decodedToken.email,\r\n          token: data.token,\r\n        })\r\n      );\r\n\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      if (error.response && error.response.data && error.response.data.error) {\r\n        alert(`Error en el login: ${error.response.data.error}`);\r\n      } else {\r\n        alert(`Error en el login: ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRegistrationFormSubmission = async (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      registrationForm.company !== \"no\" &&\r\n      !validateEmailDomain(registrationForm.email)\r\n    ) {\r\n      alert(\"Email no válido para la compañía seleccionada.\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.post(\r\n        `${apiUrl}/api/auth/register`,\r\n        registrationForm\r\n      );\r\n      navigate(\"/email-sent\", { state: { fromRegistration: true } });\r\n    } catch (error) {\r\n      if (error.response && error.response.data && error.response.data.error) {\r\n        alert(`Error en el registro: ${error.response.data.error}`);\r\n      } else {\r\n        alert(`Error en el registro: ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleLoginPasswordVisibility = () => {\r\n    setLoginPasswordVisible(!loginPasswordVisible);\r\n  };\r\n\r\n  const toggleRegistrationPasswordVisibility = () => {\r\n    setRegistrationPasswordVisible(!registrationPasswordVisible);\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-page-wrapper\">\r\n      <TravelToTop />\r\n\r\n      <NavBar />\r\n\r\n      <div className=\"auth-forms-wrapper\">\r\n        <div className=\"login-form form\">\r\n          <h2 className=\"title\">Inicio de sesión</h2>\r\n          <form onSubmit={handleLoginFormSubmission}>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Email\"\r\n              value={loginForm.email}\r\n              onChange={handleLoginChange}\r\n            />\r\n            <div className=\"password-field\">\r\n              <input\r\n                type={loginPasswordVisible ? \"text\" : \"password\"}\r\n                name=\"password\"\r\n                placeholder=\"Contraseña\"\r\n                value={loginForm.password}\r\n                onChange={handleLoginChange}\r\n              />\r\n              <button\r\n                className=\"btn\"\r\n                type=\"button\"\r\n                onClick={toggleLoginPasswordVisibility}\r\n              >\r\n                {loginPasswordVisible\r\n                  ? \"Ocultar contraseña\"\r\n                  : \"Mostrar contraseña\"}\r\n              </button>\r\n            </div>\r\n            <button className=\"btn\" type=\"submit\">\r\n              Login\r\n            </button>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"registration-form form\">\r\n          <h2 className=\"title\">Registro de nuevos usuarios</h2>\r\n          <form onSubmit={handleRegistrationFormSubmission}>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              placeholder=\"Nombre de usuario\"\r\n              value={registrationForm.username}\r\n              onChange={handleRegistrationChange}\r\n            />\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Email\"\r\n              value={registrationForm.email}\r\n              onChange={handleRegistrationChange}\r\n            />\r\n            {!validateEmailDomain(registrationForm.email) &&\r\n            registrationForm.company !== \"no\" ? (\r\n              <div className=\"warning-msg active\">\r\n                Email no válido para la compañía seleccionada.\r\n              </div>\r\n            ) : (\r\n              <div className=\"warning-msg inactive\">\r\n                Email no válido para la compañía seleccionada.\r\n              </div>\r\n            )}\r\n\r\n            <input\r\n              type={registrationPasswordVisible ? \"text\" : \"password\"}\r\n              name=\"password\"\r\n              placeholder=\"Password\"\r\n              value={registrationForm.password}\r\n              onChange={handleRegistrationChange}\r\n            />\r\n            {checkPasswordRequirements(registrationForm.password) ? (\r\n              <div className=\"warning-msg good\">\r\n                La contraseña tiene que tener entre 10 y 100 caracteres,\r\n                contener al menos un número, una letra y un carácter especial.\r\n              </div>\r\n            ) : (\r\n              <div className=\"warning-msg bad\">\r\n                La contraseña tiene que tener entre 10 y 100 caracteres,\r\n                contener al menos un número, una letra y un carácter especial.\r\n              </div>\r\n            )}\r\n            <button\r\n              className=\"btn\"\r\n              type=\"button\"\r\n              onClick={toggleRegistrationPasswordVisibility}\r\n            >\r\n              {registrationPasswordVisible\r\n                ? \"Ocultar contraseña\"\r\n                : \"Mostrar contraseña\"}\r\n            </button>\r\n\r\n            <div className=\"select-element select-company\">\r\n              <select\r\n                name=\"company\"\r\n                value={registrationForm.company}\r\n                onChange={handleRegistrationChange}\r\n              >\r\n                <option value=\"no\">No</option>\r\n                <option value=\"Google\">Google</option>\r\n              </select>\r\n            </div>\r\n\r\n            <button className=\"btn\" type=\"submit\">\r\n              Registrarse\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <BottomBar />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { useDispatch } from \"react-redux\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { logout } from \"../../actions/authAction\";\r\nimport { useNavigate } from \"react-router\";\r\n\r\nconst useTokenValidation = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const validateToken = () => {\r\n    const token = localStorage.getItem(\"authToken\");\r\n    if (token) {\r\n      const decodedToken = jwtDecode(token);\r\n      const currentTime = Date.now() / 1000;\r\n\r\n      if (decodedToken.exp < currentTime) {\r\n        localStorage.removeItem(\"authToken\");\r\n        navigate(\"/\");\r\n        dispatch(logout());\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  return validateToken;\r\n};\r\n\r\nexport default useTokenValidation;\r\n","import React from \"react\";\r\nimport ReactModal from \"react-modal\";\r\nimport axios from \"axios\";\r\nimport { logout } from \"../../actions/authAction\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport useTokenValidation from \"../helpers/useTokenValidation\";\r\nconst config = require(\"../../../env\");\r\n\r\nReactModal.setAppElement(\".app-wrapper\");\r\n\r\nconst DeletionModal = ({\r\n  isOpen,\r\n  handleModalClose,\r\n  userId,\r\n  token,\r\n  callingComponent,\r\n  username,\r\n  protocolId,\r\n  protocolTitle,\r\n  handleSuccesfulProtocolDeletion,\r\n}) => {\r\n  const customStyles = {\r\n    content: {\r\n      top: \"50%\",\r\n      left: \"50%\",\r\n      right: \"auto\",\r\n      marginRight: \"-50%\",\r\n      transform: \"translate(-50%, -50%)\",\r\n      width: \"580px\",\r\n      height: \"300px\",\r\n      backgroundColor: \"#f5c6cb\",\r\n      color: \"#8902f1\",\r\n      borderRadius: \"8px\",\r\n      padding: \"18px\",\r\n      boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\r\n    },\r\n    overlay: {\r\n      backgroundColor: \"rgba(1, 1, 1, 0.75)\",\r\n    },\r\n  };\r\n\r\n  const apiUrl = config.apiUrl;\r\n  const dispatch = useDispatch();\r\n  const validateToken = useTokenValidation();\r\n\r\n  let item = \"\";\r\n  if (callingComponent === \"Users-user\" || callingComponent === \"Users-admin\") {\r\n    item = \"usuario\";\r\n  } else if (callingComponent === \"protocols\") {\r\n    item = \"protocolo\";\r\n  }\r\n\r\n  const deleteUser = async (id) => {\r\n\r\n    if (validateToken()) {\r\n      try {\r\n        await axios.delete(`${apiUrl}/api/auth/delete-user/${id}`);\r\n        handleModalClose();\r\n        alert(\"Usuario eliminado correctamente\");\r\n\r\n        if (callingComponent === \"Users-user\") {\r\n          handleLogout();\r\n        }\r\n      } catch (error) {\r\n        alert(`Error eliminando usuario: ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const deleteProtocol = async (id) => {\r\n\r\n    if (validateToken()) {\r\n      try {\r\n        await axios.delete(`${apiUrl}/api/protocols/${id}`);\r\n        handleSuccesfulProtocolDeletion(id);\r\n        handleModalClose();\r\n        alert(\"Protocolo eliminado correctamente\");\r\n      } catch (error) {\r\n        alert(`Error eliminando protocolo: ${error.message}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"authToken\");\r\n    dispatch(logout());\r\n  };\r\n\r\n  return (\r\n    <ReactModal\r\n      style={customStyles}\r\n      onRequestClose={handleModalClose}\r\n      isOpen={isOpen}\r\n    >\r\n      <div className=\"modal-content\">\r\n        <h2>{`Eliminar ${item}: ${\r\n          callingComponent === \"protocols\" ? protocolTitle : username\r\n        }`}</h2>\r\n        <p>{`¿Estás seguro de que quieres eliminar este ${item}?`}</p>\r\n\r\n        <button\r\n          className=\"btn delete-btn\"\r\n          onClick={\r\n            callingComponent !== \"Users-user\" &&\r\n            callingComponent !== \"Users-admin\"\r\n              ? () => deleteProtocol(protocolId)\r\n              : () => deleteUser(userId)\r\n          }\r\n        >\r\n          Borrar\r\n        </button>\r\n        <button className=\"btn cancel-btn\" onClick={handleModalClose}>\r\n          Cancelar\r\n        </button>\r\n      </div>\r\n    </ReactModal>\r\n  );\r\n};\r\n\r\nexport default DeletionModal;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useLocation, useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\nimport NavBar from \"../navigation/NavBar\";\r\nimport BottomBar from \"../BottomBar\";\r\nimport SearchBar from \"../navigation/SearchBar\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport Loading from \"../Loading\";\r\nimport DeletionModal from \"../Modal/DeletionModal\";\r\nimport TravelToTop from \"../navigation/TravelToTop\";\r\nimport useTokenValidation from \"../helpers/useTokenValidation\";\r\nconst config = require(\"../../../env\");\r\n\r\nconst ProtocolContainer = ({ showFavouritesOnly }) => {\r\n  const apiUrl = config.apiUrl;\r\n  const { category } = useParams();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [protocols, setProtocols] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [currentCategory, setCurrentCategory] = useState(category);\r\n  const [areFavourites, setAreFavourites] = useState({});\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [protocolDeletedId, setProtocolDeletedId] = useState(null);\r\n  const [selectedProtocol, setSelectedProtocol] = useState({\r\n    id: \"\",\r\n    title: \"\",\r\n  });\r\n  const [noFavouriteProtocolId, setNoFavouriteProtocolId] = useState(null);\r\n  const { token, role, isAuthenticated } = useSelector((state) => state.auth);\r\n  const validateToken = useTokenValidation();\r\n\r\n  const getButtonClass = (category) => {\r\n    if (category === currentCategory) {\r\n      return \"btn-active\";\r\n    } else if (\r\n      currentCategory === \"all-categories\" &&\r\n      category === \"Todas las categorías\"\r\n    ) {\r\n      return \"btn-active\";\r\n    } else {\r\n      return \"btn\";\r\n    }\r\n  };\r\n\r\n  const handleSearch = (query) => {\r\n    if (!showFavouritesOnly) {\r\n      setCurrentCategory(null);\r\n      navigate(`/protocols?search=${query}`);\r\n    } else {\r\n      setCurrentCategory(null);\r\n      navigate(`/favourites?search=${query}`);\r\n    }\r\n  };\r\n\r\n  const handleProtocolDeleteClick = (protocolId, protocolTitle) => {\r\n    setSelectedProtocol({ id: protocolId, title: protocolTitle });\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleSuccesfulProtocolDeletion = (deletedProtocolId) => {\r\n    setProtocolDeletedId(deletedProtocolId);\r\n  };\r\n\r\n  const handleModalClose = () => {\r\n    setModalOpen(false);\r\n  };\r\n\r\n  const handleFavouriteClick = (id) => {\r\n    const isFavourite = areFavourites[id];\r\n\r\n    if (!isFavourite && validateToken()) {\r\n      axios\r\n        .post(`${apiUrl}/api/protocols/favourite`, { protocol_id: id })\r\n        .then((response) => {\r\n          setAreFavourites((prevFavourites) => ({\r\n            ...prevFavourites,\r\n            [id]: true,\r\n          }));\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Error marcando como favorito:\", error);\r\n        });\r\n    } else if (validateToken) {\r\n      axios\r\n        .delete(`${apiUrl}/api/protocols/favourite`, {\r\n          data: { protocol_id: id },\r\n        })\r\n        .then((response) => {\r\n          setAreFavourites((prevFavourites) => ({\r\n            ...prevFavourites,\r\n            [id]: false,\r\n          }));\r\n          setNoFavouriteProtocolId(id);\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Error eliminando de favoritos:\", error);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && role === \"admin\" && protocolDeletedId) {\r\n      setProtocols((prevProtocols) =>\r\n        prevProtocols.filter((protocol) => protocol.id !== protocolDeletedId)\r\n      );\r\n    }\r\n  }, [isAuthenticated, role, protocolDeletedId, setProtocols]);\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && showFavouritesOnly && noFavouriteProtocolId) {\r\n      setProtocols((prevProtocols) =>\r\n        prevProtocols.filter(\r\n          (protocol) => protocol.id !== noFavouriteProtocolId\r\n        )\r\n      );\r\n    }\r\n  }, [isAuthenticated, noFavouriteProtocolId, setProtocols]);\r\n\r\n  const categories = [\r\n    \"Biomoléculas-DNA\",\r\n    \"Biomoléculas-Proteínas\",\r\n    \"Microbiología\",\r\n    \"Cultivos celulares\",\r\n    \"Todas las categorías\",\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const query = new URLSearchParams(location.search).get(\"search\");\r\n\r\n    const fetchProtocols = async () => {\r\n      try {\r\n        const params = {};\r\n\r\n        if (query) {\r\n          params.search = query;\r\n        } else if (currentCategory) {\r\n          params.category = currentCategory;\r\n        }\r\n\r\n        const response = await axios.get(`${apiUrl}/api/protocols`, {\r\n          params: {\r\n            ...params,\r\n            favourites: showFavouritesOnly,\r\n          },\r\n        });\r\n        const protocols = response.data;\r\n        setProtocols(protocols);\r\n\r\n        if (token && protocols) {\r\n          const favouriteStatuses = {};\r\n\r\n          for (const protocol of protocols) {\r\n            try {\r\n              const favouriteResponse = await axios.post(\r\n                `${apiUrl}/api/protocols/favourite/check`,\r\n                { protocol_id: protocol.id }\r\n              );\r\n              favouriteStatuses[protocol.id] =\r\n                favouriteResponse.data.isFavourite;\r\n            } catch (error) {\r\n              console.error(\r\n                `Error chequeando el estado de favorito del protocolo ${protocol.id}`,\r\n                error\r\n              );\r\n            }\r\n          }\r\n          setAreFavourites(favouriteStatuses);\r\n        }\r\n\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error obteniendo protocolos\", error);\r\n      }\r\n    };\r\n    fetchProtocols();\r\n  }, [location.search, currentCategory]);\r\n\r\n  const protocolsList = () => {\r\n    return (\r\n      <ul className=\"protocols-list\">\r\n        {protocols.map((protocol) => (\r\n          <li key={protocol.id} className=\"protocol-wrapper\">\r\n            <DeletionModal\r\n              isOpen={modalOpen}\r\n              handleModalClose={handleModalClose}\r\n              protocolId={selectedProtocol.id}\r\n              protocolTitle={selectedProtocol.title}\r\n              handleSuccesfulProtocolDeletion={handleSuccesfulProtocolDeletion}\r\n              token={token}\r\n              callingComponent=\"protocols\"\r\n            />\r\n\r\n            <div className=\"protocol-title\">\r\n              <h3>\r\n                <Link to={`/protocols/protocol/${protocol.id}`}>\r\n                  {protocol.title}{\" \"}\r\n                </Link>\r\n              </h3>\r\n\r\n              {isAuthenticated ? (\r\n                areFavourites[protocol.id] ? (\r\n                  <div className=\"favourite-icon\">\r\n                    <FontAwesomeIcon\r\n                      className=\"empty-heart-icon activity-icon\"\r\n                      onClick={() => handleFavouriteClick(protocol.id)}\r\n                      icon=\"fas fa-heart\"\r\n                      size=\"lg\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"favourite-icon\">\r\n                    <FontAwesomeIcon\r\n                      className=\"empty-heart-icon activity-icon\"\r\n                      onClick={() => handleFavouriteClick(protocol.id)}\r\n                      icon=\"far fa-heart\"\r\n                      size=\"lg\"\r\n                    />\r\n                  </div>\r\n                )\r\n              ) : null}\r\n\r\n              {isAuthenticated && role === \"admin\" ? (\r\n                <div className=\"admin-activity-icons\">\r\n                  <div className=\"activity-icon\">\r\n                    <Link to={`/update-protocol/${protocol.id}`}>\r\n                      <FontAwesomeIcon icon=\"fa-file-pen\" size=\"lg\" />\r\n                    </Link>\r\n                  </div>\r\n\r\n                  <div className=\"activity-icon\">\r\n                    <FontAwesomeIcon\r\n                      onClick={() =>\r\n                        handleProtocolDeleteClick(protocol.id, protocol.title)\r\n                      }\r\n                      icon=\"fa-trash\"\r\n                      size=\"lg\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n\r\n            <p>{protocol.objective}</p>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"protocols-container-container container\">\r\n      <TravelToTop />\r\n      <NavBar />\r\n      <div className=\"protocols-container-wrapper main-wrapper\">\r\n        <h2>Categorías</h2>\r\n        <div className=\"protocols-select-category-btns\">\r\n          {categories.map((category) =>\r\n            category !== \"Todas las categorías\" ? (\r\n              <button\r\n                key={category}\r\n                className={getButtonClass(category)}\r\n                type=\"button\"\r\n                onClick={\r\n                  showFavouritesOnly\r\n                    ? () => {\r\n                        navigate(`/favourites/${category}`);\r\n                        setCurrentCategory(category);\r\n                      }\r\n                    : () => {\r\n                        navigate(`/protocols/${category}`);\r\n                        setCurrentCategory(category);\r\n                      }\r\n                }\r\n              >\r\n                {category}\r\n              </button>\r\n            ) : (\r\n              <button\r\n                key={category}\r\n                className={getButtonClass(category)}\r\n                type=\"button\"\r\n                onClick={\r\n                  showFavouritesOnly\r\n                    ? () => {\r\n                        navigate(`/favourites/all-categories`);\r\n                        setCurrentCategory(\"all-categories\");\r\n                      }\r\n                    : () => {\r\n                        navigate(`/protocols/all-categories`);\r\n                        setCurrentCategory(\"all-categories\");\r\n                      }\r\n                }\r\n              >\r\n                {category}\r\n              </button>\r\n            )\r\n          )}\r\n        </div>\r\n        <div className=\"title\">\r\n          {currentCategory === \"all-categories\" || !currentCategory ? (\r\n            <h2>Lista de protocolos</h2>\r\n          ) : (\r\n            <h2>Lista de protocolos ({currentCategory})</h2>\r\n          )}\r\n        </div>\r\n\r\n        <SearchBar onSearch={handleSearch} />\r\n\r\n        {isAuthenticated && role === \"admin\" ? (\r\n          <div className=\"new-protocol-icon\">\r\n            <Link className=\"activity-icon\" to=\"/new-protocol\">\r\n              <FontAwesomeIcon icon=\"fa-circle-plus\" size=\"3x\" />\r\n            </Link>\r\n          </div>\r\n        ) : null}\r\n\r\n        {isLoading ? (\r\n          <Loading />\r\n        ) : protocols.length === 0 ? (\r\n          <div className=\"no-protocols-found\">\r\n            No se han encontrado protocolos que cumplan los criterios\r\n            establecidos.\r\n          </div>\r\n        ) : (\r\n          protocolsList()\r\n        )}\r\n      </div>\r\n      <BottomBar />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProtocolContainer;\r\n","import React, { useEffect } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useLocation, useNavigate } from \"react-router\";\r\nimport { logout } from \"../../actions/authAction\";\r\n\r\nimport BottomBar from \"../BottomBar\";\r\nimport NavBar from \"../navigation/NavBar\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nexport default function EmailSent() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const { token } = useSelector((state) => state.auth);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"authToken\");\r\n    dispatch(logout());\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!location.state || !location.state.fromRegistration) {\r\n      navigate(\"/\");\r\n      return undefined;\r\n    }\r\n\r\n    if (token) {\r\n      handleLogout();\r\n    }\r\n  }, [token]);\r\n\r\n  return (\r\n    <div className=\"email-sent-container\">\r\n      <NavBar />\r\n      <div className=\"email-sent-page\">\r\n        <h2>Email de verificación enviado</h2>\r\n        <FontAwesomeIcon icon=\"fa-envelope\" size=\"5x\" />\r\n        <p>\r\n          ¡Gracias por registrarte! Se te ha enviado un email de confirmación\r\n          para que puedas continuar con el proceso de registro.\r\n        </p>\r\n      </div>\r\n      <BottomBar />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport NavBar from \"../navigation/NavBar\";\r\nimport BottomBar from \"../BottomBar\";\r\nimport axios from \"axios\";\r\nimport DeletionModal from \"../Modal/DeletionModal\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport Loading from \"../Loading\";\r\nimport TravelToTop from \"../navigation/TravelToTop\";\r\nimport useTokenValidation from \"../helpers/useTokenValidation\";\r\nconst config = require(\"../../../env\");\r\n\r\nexport default function AccountManagement() {\r\n  const [usersList, setUsersList] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedUser, setSelectedUser] = useState({\r\n    userId: \"\",\r\n    username: \"\",\r\n  });\r\n\r\n  const { token, username } = useSelector((state) => state.auth);\r\n  const apiUrl = config.apiUrl;\r\n  const validateToken = useTokenValidation();\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      getAllUsers();\r\n    }\r\n  }, [token]);\r\n\r\n  const getAllUsers = async () => {\r\n\r\n    if (validateToken()) {\r\n      try {\r\n        const response = await axios.get(`${apiUrl}/api/auth/users`);\r\n        const data = response.data;\r\n        setUsersList(data);\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        if (\r\n          error.response &&\r\n          error.response.data &&\r\n          error.response.data.error\r\n        ) {\r\n          alert(`Error: ${error.response.data.error}`);\r\n        } else {\r\n          alert(`Error: ${error.message}`);\r\n        }\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleError = (error) => {\r\n    if (error.response && error.response.data && error.response.data.error) {\r\n      alert(`Error: ${error.response.data.error}`);\r\n    } else {\r\n      alert(`Error: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const updateUserRole = async (userId, newRole) => {\r\n\r\n    if (validateToken()) {\r\n      try {\r\n        const response = await axios.patch(\r\n          `${apiUrl}/api/auth/users/update-role/${userId}`,\r\n          { newRole }\r\n        );\r\n        alert(response.data.message);\r\n        getAllUsers();\r\n      } catch (error) {\r\n        handleError(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRoleChange = (userId, newRole) => {\r\n    updateUserRole(userId, newRole);\r\n  };\r\n\r\n  const handleDeleteClick = (userId, username) => {\r\n    setSelectedUser({\r\n      userId,\r\n      username,\r\n    });\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleModalClose = () => {\r\n    setModalOpen(false);\r\n    getAllUsers();\r\n  };\r\n\r\n  const users = (usersList) => {\r\n    const user = usersList.map((user) => {\r\n      if (user.username !== username) {\r\n        return (\r\n          <div key={user.id} className=\"user-wrapper\">\r\n            <DeletionModal\r\n              isOpen={modalOpen}\r\n              handleModalClose={handleModalClose}\r\n              userId={selectedUser.userId}\r\n              username={selectedUser.username}\r\n              token={token}\r\n              callingComponent=\"Users-admin\"\r\n            />\r\n\r\n            <div className=\"user-username\">\r\n              <span className=\"bold\">Nombre usuario: </span> {user.username}\r\n            </div>\r\n            <div className=\"user-email\">\r\n              <span className=\"bold\">Email: </span>\r\n              {user.email}\r\n            </div>\r\n            <div className=\"user-role\">\r\n              <div className=\"select-element select-company\">\r\n                <span className=\"bold\">Rol: </span>\r\n                <select\r\n                  name=\"role\"\r\n                  value={user.role}\r\n                  onChange={(e) => handleRoleChange(user.id, e.target.value)}\r\n                >\r\n                  <option value=\"user\">Usuario</option>\r\n                  <option value=\"admin\">Administrador</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div\r\n              className=\"delete-icon activity-icon\"\r\n              onClick={() => handleDeleteClick(user.id, user.username)}\r\n            >\r\n              <FontAwesomeIcon icon=\"fa-trash\" />\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    });\r\n    return user;\r\n  };\r\n\r\n  return (\r\n    <div className=\"users-management-container\">\r\n      <TravelToTop />\r\n      <NavBar />\r\n\r\n      <div className=\"users-list-wrapper\">\r\n        <h2>Lista de usuarios</h2>\r\n        {!isLoading ? (\r\n          <div className=\"users-list-users\">{users(usersList)}</div>\r\n        ) : (\r\n          <Loading />\r\n        )}\r\n      </div>\r\n\r\n      <BottomBar />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setUserInfo } from \"../../actions/authAction\";\r\nconst config = require(\"../../../env\");\r\n\r\nimport NavBar from \"../navigation/NavBar\";\r\nimport BottomBar from \"../BottomBar\";\r\nimport TravelToTop from \"../navigation/TravelToTop\";\r\nimport DeletionModal from \"../Modal/DeletionModal\";\r\nimport useTokenValidation from \"../helpers/useTokenValidation\";\r\n\r\nexport default function AccountManagement() {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const apiUrl = config.apiUrl;\r\n  const validateToken = useTokenValidation();\r\n\r\n  const { username, id, email, company, token } = useSelector(\r\n    (state) => state.auth\r\n  );\r\n\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [oldPasswordVisible, setOldPasswordVisible] = useState(false);\r\n  const [newPasswordVisible, setNewPasswordVisible] = useState(false);\r\n\r\n  const [passwordField, setPasswordField] = useState({\r\n    oldPassword: \"\",\r\n    newPassword: \"\",\r\n  });\r\n\r\n  const [emailField, setEmailField] = useState({\r\n    oldEmail: email,\r\n    newEmail: email,\r\n    company: company,\r\n  });\r\n\r\n  const [usernameField, setUsernameField] = useState({\r\n    newUsername: username,\r\n    oldUsername: username,\r\n  });\r\n\r\n  const companyDomains = {\r\n    Google: \"gmail.com\",\r\n  };\r\n\r\n  const validateEmailDomain = (email) => {\r\n    const domain = email.split(\"@\")[1];\r\n    return domain === companyDomains[emailField.company];\r\n  };\r\n\r\n  const passwordRegex =\r\n    /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*?&¿!#^])[A-Za-z\\d@$!%*?&¿!#^]{10,100}$/;\r\n\r\n  const checkPasswordRequirements = (password) => {\r\n    return passwordRegex.test(password);\r\n  };\r\n\r\n  const handlePasswordInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setPasswordField({\r\n      ...passwordField,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleUsernameInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setUsernameField({\r\n      ...usernameField,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleEmailInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setEmailField({\r\n      ...emailField,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleUsernameChangeSubmission = async (e) => {\r\n    e.preventDefault();\r\n    const { newUsername, oldUsername } = usernameField;\r\n\r\n    if (newUsername === oldUsername) {\r\n      alert(\"Error: el nuevo nombre de usuario y el antiguo son iguales.\");\r\n    } else if (validateToken()) {\r\n      try {\r\n        const response = await axios.patch(\r\n          `${apiUrl}/api/auth/update-username/${id}`,\r\n          { usernameField }\r\n        );\r\n        const data = response.data;\r\n        localStorage.setItem(\"authToken\", data.token);\r\n\r\n        const decodedToken = jwtDecode(data.token);\r\n        dispatch(\r\n          setUserInfo({\r\n            id: decodedToken.id,\r\n            role: decodedToken.role,\r\n            company: decodedToken.company,\r\n            username: decodedToken.username,\r\n            email: decodedToken.email,\r\n            token: data.token,\r\n          })\r\n        );\r\n\r\n        alert(data.message);\r\n        setUsernameField({\r\n          newUsername: decodedToken.username,\r\n          oldUsername: decodedToken.username,\r\n        });\r\n      } catch (error) {\r\n        if (\r\n          error.response &&\r\n          error.response.data &&\r\n          error.response.data.error\r\n        ) {\r\n          alert(`Error: ${error.response.data.error}`);\r\n        } else {\r\n          alert(`Error: ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePasswordChangeSubmission = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const { oldPassword, newPassword } = passwordField;\r\n\r\n    if (oldPassword === newPassword) {\r\n      alert(\"Error: la nueva contraseña y la antigua son iguales.\");\r\n    } else if (validateToken()) {\r\n      try {\r\n        const response = await axios.patch(\r\n          `${apiUrl}/api/auth/change-password/${id}`,\r\n          { passwordField }\r\n        );\r\n        setPasswordField({\r\n          newPassword: \"\",\r\n          oldPassword: \"\",\r\n        });\r\n        const data = response.data;\r\n        alert(data.message);\r\n      } catch (error) {\r\n        if (\r\n          error.response &&\r\n          error.response.data &&\r\n          error.response.data.error\r\n        ) {\r\n          alert(`Error: ${error.response.data.error}`);\r\n        } else {\r\n          alert(`Error: ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEmailChangeSubmission = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const { oldEmail, newEmail } = emailField;\r\n\r\n    if (oldEmail === newEmail) {\r\n      alert(\"Error: el nuevo email y el antiguo son iguales.\");\r\n    } else if (validateToken()) {\r\n      try {\r\n        const response = await axios.patch(\r\n          `${apiUrl}/api/auth/update-email/${id}`,\r\n          { emailField }\r\n        );\r\n        const data = response.data;\r\n        alert(data.message);\r\n        navigate(\"/email-sent\", { state: { fromRegistration: true } });\r\n      } catch (error) {\r\n        if (\r\n          error.response &&\r\n          error.response.data &&\r\n          error.response.data.error\r\n        ) {\r\n          alert(`Error: ${error.response.data.error}`);\r\n        } else {\r\n          alert(`Error: ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleOldPasswordVisibility = () => {\r\n    setOldPasswordVisible(!oldPasswordVisible);\r\n  };\r\n\r\n  const toggleNewPasswordVisibility = () => {\r\n    setNewPasswordVisible(!newPasswordVisible);\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleModalClose = () => {\r\n    setModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"account-management-container\">\r\n      <DeletionModal\r\n        isOpen={modalOpen}\r\n        handleModalClose={handleModalClose}\r\n        userId={id}\r\n        username={username}\r\n        token={token}\r\n        callingComponent=\"Users-user\"\r\n      />\r\n\r\n      <TravelToTop />\r\n\r\n      <NavBar />\r\n\r\n      <div className=\"account-management-wrapper\">\r\n        <h2 className=\"title\">Configuración de la cuenta</h2>\r\n        <div className=\"email-field-wrapper\">\r\n          <h3>Email</h3>\r\n          <input\r\n            type=\"email\"\r\n            name=\"newEmail\"\r\n            placeholder=\"Email\"\r\n            value={emailField.newEmail}\r\n            onChange={handleEmailInput}\r\n          />\r\n          {!validateEmailDomain(emailField.newEmail) &&\r\n          emailField.company !== \"no\" ? (\r\n            <div className=\"warning-msg active\">\r\n              Email no válido para la compañía seleccionada.\r\n            </div>\r\n          ) : (\r\n            <div className=\"warning-msg inactive\">\r\n              Email válido para la compañía seleccionada.\r\n            </div>\r\n          )}\r\n\r\n          <select\r\n            name=\"company\"\r\n            value={emailField.company}\r\n            onChange={handleEmailInput}\r\n          >\r\n            <option value=\"no\">No</option>\r\n            <option value=\"Google\">Google</option>\r\n          </select>\r\n\r\n          <button\r\n            className=\"btn\"\r\n            type=\"button\"\r\n            onClick={handleEmailChangeSubmission}\r\n          >\r\n            Confirmar cambio email\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"username-field-wrapper\">\r\n          <h3>Nombre de usuario</h3>\r\n          <input\r\n            type=\"username\"\r\n            name=\"newUsername\"\r\n            placeholder=\"Nombre de usuario\"\r\n            value={usernameField.newUsername}\r\n            onChange={handleUsernameInput}\r\n          />\r\n\r\n          <button\r\n            className=\"btn\"\r\n            type=\"button\"\r\n            onClick={handleUsernameChangeSubmission}\r\n          >\r\n            Confirmar cambio nombre usuario\r\n          </button>\r\n        </div>\r\n\r\n        <h3>Contraseña</h3>\r\n        <div className=\"password-wrapper old-password-wrapper\">\r\n          <input\r\n            type={oldPasswordVisible ? \"text\" : \"password\"}\r\n            name=\"oldPassword\"\r\n            placeholder=\"Contraseña antigua\"\r\n            value={passwordField.oldPassword}\r\n            onChange={handlePasswordInput}\r\n          />\r\n          <button\r\n            className=\"btn\"\r\n            type=\"button\"\r\n            onClick={toggleOldPasswordVisibility}\r\n          >\r\n            {oldPasswordVisible ? \"Ocultar contraseña\" : \"Mostrar contraseña\"}\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"password-wrapper new-password-wrapper\">\r\n          <input\r\n            type={newPasswordVisible ? \"text\" : \"password\"}\r\n            name=\"newPassword\"\r\n            placeholder=\"Nueva contraseña\"\r\n            value={passwordField.newPassword}\r\n            onChange={handlePasswordInput}\r\n          />\r\n          {checkPasswordRequirements(passwordField.newPassword) ? (\r\n            <div className=\"warning-msg good\">\r\n              La contraseña tiene que tener entre 10 y 100 caracteres, contener\r\n              al menos un número, una letra y un carácter especial.\r\n            </div>\r\n          ) : (\r\n            <div className=\"warning-msg bad\">\r\n              La contraseña tiene que tener entre 10 y 100 caracteres, contener\r\n              al menos un número, una letra y un carácter especial.\r\n            </div>\r\n          )}\r\n          <button\r\n            className=\"btn\"\r\n            type=\"button\"\r\n            onClick={toggleNewPasswordVisibility}\r\n          >\r\n            {newPasswordVisible ? \"Ocultar contraseña\" : \"Mostrar contraseña\"}\r\n          </button>\r\n\r\n          <button\r\n            className=\"btn\"\r\n            type=\"button\"\r\n            onClick={handlePasswordChangeSubmission}\r\n          >\r\n            Confirmar cambio contraseña\r\n          </button>\r\n\r\n          <div className=\"delete-account\">\r\n            <button\r\n              className=\"btn\"\r\n              type=\"button\"\r\n              onClick={() => handleDeleteClick()}\r\n            >\r\n              Eliminar cuenta\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <BottomBar />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useCallback, useState, useEffect } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nconst MyDropzone = ({ onDrop, previousImg }) => {\r\n  const [preview, setPreview] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (previousImg) {\r\n      setPreview(previousImg);\r\n    } else {\r\n      setPreview(null);\r\n    }\r\n  }, [previousImg]);\r\n\r\n  const handleDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      if (acceptedFiles && acceptedFiles[0]) {\r\n        const file = acceptedFiles[0];\r\n        console.log(\"file\", file)\r\n        const previewUrl = URL.createObjectURL(file);\r\n        console.log(\"previewUrl\", previewUrl)\r\n        setPreview(previewUrl);\r\n        onDrop(acceptedFiles);\r\n      }\r\n    },\r\n    [onDrop]\r\n  );\r\n\r\n  const removeImage = () => {\r\n    if (typeof preview === \"string\" && preview.startsWith(\"blob:\")) {\r\n      URL.revokeObjectURL(preview);\r\n    } else if (typeof preview === \"string\" && !preview.startsWith(\"blob:\")) {\r\n      URL.revokeObjectURL(preview);\r\n    }\r\n    setPreview(null);\r\n    onDrop(null);\r\n  };\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    onDrop: handleDrop,\r\n    accept: {\r\n      \"image/jpeg\": [\".jpeg\", \".jpg\"],\r\n      \"image/png\": [\".png\"],\r\n    },\r\n    multiple: false,\r\n    noClick: preview !== null && preview !== undefined,\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (typeof preview === \"string\" && preview.startsWith(\"blob:\")) {\r\n        URL.revokeObjectURL(preview);\r\n      }\r\n    };\r\n  }, [preview]);\r\n\r\n  return (\r\n    <div\r\n      className=\"custom-dropzone\"\r\n      {...getRootProps()}\r\n      style={{\r\n        border: \"2px dashed #007bff\",\r\n        padding: \"20px\",\r\n        textAlign: \"center\",\r\n      }}\r\n    >\r\n      <input {...getInputProps()} />\r\n      {!preview ? (\r\n        <div className=\"dropzone-area-empty\">\r\n          <h2>\r\n            <FontAwesomeIcon icon=\"fa-solid fa-file-image\" size=\"xl\" />\r\n          </h2>\r\n          <h3>JPG, PNG</h3>\r\n          <p>Arrastra una imagen o pulsa para buscarla y añadirla</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"preview-image\">\r\n          <img src={preview} alt=\"Preview\" />\r\n          <button\r\n            className=\"btn\"\r\n            onClick={() => {\r\n              removeImage();\r\n            }}\r\n            style={{ marginTop: \"10px\" }}\r\n          >\r\n            Eliminar\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyDropzone;\r\n","export const unitConversionFactors = {\r\n  concentration: {\r\n    molarity: {\r\n      M: 1,\r\n      mM: 10 ** 3,\r\n      µM: 10 ** 6,\r\n      nM: 10 ** 9,\r\n    },\r\n\r\n    \"g/mL\": {\r\n      \"g/mL\": 1,\r\n      \"mg/mL\": 10 ** 3,\r\n      \"µg/mL\": 10 ** 6,\r\n      \"ng/mL\": 10 ** 9,\r\n    },\r\n\r\n    \"mg/uL\": {\r\n      \"mg/µL\": 1,\r\n      \"µg/µL\": 10 ** 3,\r\n      \"ng/µL\": 10 ** 6,\r\n    },\r\n\r\n    \"%\": {\r\n      \"%v/v\": 1,\r\n      \"%m/v (g/ml)\": 1,\r\n    },\r\n\r\n    x: {\r\n      x: 1,\r\n    },\r\n\r\n    U: { \"U/µL\": 1 },\r\n  },\r\n  volume: {\r\n    L: 1,\r\n    mL: 10 ** 3,\r\n    µL: 10 ** 6,\r\n    nL: 10 ** 9,\r\n  },\r\n};\r\n\r\nexport const getUnitType = (initialUnit) => {\r\n  const { concentration, volume } = unitConversionFactors;\r\n\r\n  for (const unitType in concentration) {\r\n    if (concentration[unitType].hasOwnProperty(initialUnit)) {\r\n      return unitType;\r\n    }\r\n  }\r\n\r\n  for (const unitType in volume) {\r\n    if (volume.hasOwnProperty(initialUnit)) {\r\n      return unitType;\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const concentrationUnitsMatching = (initialUnit, finalUnit) => {\r\n  const { concentration } = unitConversionFactors;\r\n\r\n  for (const unitType in concentration) {\r\n    if (\r\n      concentration[unitType].hasOwnProperty(initialUnit) &&\r\n      concentration[unitType].hasOwnProperty(finalUnit)\r\n    ) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport const correctConcentrationLogic = (\r\n  initialValue,\r\n  initialUnit,\r\n  finalValue,\r\n  finalUnit\r\n) => {\r\n  const { concentration } = unitConversionFactors;\r\n\r\n  let initialFactor, finalFactor;\r\n  let foundInitial = false;\r\n  let foundFinal = false;\r\n\r\n  for (const unitType in concentration) {\r\n    if (concentration[unitType].hasOwnProperty(initialUnit)) {\r\n      initialFactor = concentration[unitType][initialUnit];\r\n      foundInitial = true;\r\n    }\r\n    if (concentration[unitType].hasOwnProperty(finalUnit)) {\r\n      finalFactor = concentration[unitType][finalUnit];\r\n      foundFinal = true;\r\n    }\r\n    if (initialFactor !== undefined && finalFactor !== undefined) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (\r\n    !foundInitial ||\r\n    !foundFinal ||\r\n    initialFactor === undefined ||\r\n    finalFactor === undefined\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  if (initialFactor < finalFactor) {\r\n    return true;\r\n  } else if (initialFactor > finalFactor) {\r\n    return false;\r\n  } else if (initialFactor === finalFactor) {\r\n    if (initialValue <= finalValue) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  } else {\r\n    return initialValue > finalValue;\r\n  }\r\n};\r\n\r\nexport const calculateReactiveVolume = (\r\n  finalVolumeValue,\r\n  finalVolumeUnits,\r\n  initialConcentrationValue,\r\n  initialConcentrationUnits,\r\n  finalConcentrationValue,\r\n  finalConcentrationUnits\r\n) => {\r\n  if (\r\n    correctConcentrationLogic(\r\n      initialConcentrationValue,\r\n      initialConcentrationUnits,\r\n      finalConcentrationValue,\r\n      finalConcentrationUnits\r\n    )\r\n  ) {\r\n    const { concentration } = unitConversionFactors;\r\n\r\n    let initialFactor;\r\n    let finalFactor;\r\n\r\n    for (const unitType in concentration) {\r\n      if (concentration[unitType].hasOwnProperty(initialConcentrationUnits)) {\r\n        initialFactor = concentration[unitType][initialConcentrationUnits];\r\n      }\r\n      if (concentration[unitType].hasOwnProperty(finalConcentrationUnits)) {\r\n        finalFactor = concentration[unitType][finalConcentrationUnits];\r\n      }\r\n    }\r\n\r\n    const dilutionFactor = initialFactor / finalFactor;\r\n    const reactiveVolumeUnits = finalVolumeUnits;\r\n    const reactiveVolumeValue =\r\n      (finalConcentrationValue * finalVolumeValue * dilutionFactor) /\r\n      initialConcentrationValue;\r\n\r\n    const result = { reactiveVolumeValue, reactiveVolumeUnits };\r\n    return result;\r\n  } else {\r\n    return new Error(\r\n      \"El cálculo no se puede realizar, comprueba las unidades y los valores. Una concentración final no puede estar más concentrada que una inicial.\"\r\n    );\r\n  }\r\n};\r\n\r\nexport const decimalCommaToDot = (num) => {\r\n  if (typeof num !== \"string\") {\r\n    num = num.toString();\r\n  }\r\n\r\n  let normalizedNum;\r\n  const lastCommaIndex = num.lastIndexOf(\",\");\r\n  const lastDotIndex = num.lastIndexOf(\".\");\r\n\r\n  const countOccurrences = (str, char) => {\r\n    return str.split(char).length - 1;\r\n  };\r\n\r\n  const numCommas = countOccurrences(num, \",\");\r\n  const numDots = countOccurrences(num, \".\");\r\n\r\n  if (numCommas > 1 && numDots === 0) {\r\n    normalizedNum = num.replace(/,/g, \"\");\r\n  } else if (numCommas === 0 && numDots > 1) {\r\n    normalizedNum = num.replace(/\\./g, \"\");\r\n  } else if (lastCommaIndex > lastDotIndex) {\r\n    normalizedNum = num.replace(/\\./g, \"\").replace(\",\", \".\");\r\n  } else if (lastDotIndex > lastCommaIndex) {\r\n    normalizedNum = num.replace(/,/g, \"\");\r\n  } else if (lastCommaIndex === -1 && lastDotIndex === -1) {\r\n    normalizedNum = num;\r\n  } else if (lastCommaIndex === -1) {\r\n    normalizedNum = num.replace(/,/g, \"\");\r\n  } else if (lastDotIndex === -1) {\r\n    normalizedNum = num.replace(/\\./g, \"\").replace(\",\", \".\");\r\n  }\r\n\r\n  const parsedNum = parseFloat(normalizedNum); \r\n  return isNaN(parsedNum) ? \"\" : parsedNum;\r\n};\r\n\r\nexport const convertVolumeUnits = (value, fromUnit, toUnit) => {\r\n  const conversionFactor =\r\n    unitConversionFactors.volume[toUnit] /\r\n    unitConversionFactors.volume[fromUnit];\r\n  return value * conversionFactor;\r\n};","import React, { useEffect, useRef, useState } from \"react\";\r\nimport Quill from \"quill\";\r\nimport \"quill/dist/quill.snow.css\";\r\nimport axios from \"axios\";\r\n\r\nimport useTokenValidation from \"../helpers/useTokenValidation\";\r\nconst config = require(\"../../../env\");\r\n\r\nconst MyEditor = ({ handleTextInput, prevText }) => {\r\n  const [editorContent, setEditorContent] = useState(\"\");\r\n  const editorRef = useRef(null);\r\n  const quillRef = useRef(null);\r\n  const isInitialized = useRef(false);\r\n\r\n  const apiUrl = config.apiUrl;\r\n  const validateToken = useTokenValidation();\r\n\r\n  useEffect(() => {\r\n    if (!isInitialized.current) {\r\n      const quill = new Quill(editorRef.current, {\r\n        theme: \"snow\",\r\n        modules: {\r\n          toolbar: {\r\n            container: [\r\n              [{ header: \"1\" }, { header: \"2\" }],\r\n              [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n              [\"bold\", \"italic\", \"underline\"],\r\n              [{ color: [] }, { background: [] }],\r\n              [\"link\", \"image\"],\r\n              [\"clean\"],\r\n            ],\r\n            handlers: {\r\n              image: () => {\r\n                const input = document.createElement(\"input\");\r\n                input.setAttribute(\"type\", \"file\");\r\n                input.setAttribute(\"accept\", \"image/*\");\r\n                input.click();\r\n                input.addEventListener(\"change\", () => {\r\n                  const file = input.files[0];\r\n                  if (file) {\r\n                    uploadImage(file);\r\n                  }\r\n                });\r\n              },\r\n            },\r\n          },\r\n        },\r\n      });\r\n\r\n      quillRef.current = quill;\r\n      isInitialized.current = true;\r\n\r\n      const attachImageClickListeners = () => {\r\n        const images = editorRef.current.querySelectorAll(\"img\");\r\n        images.forEach((img) => {\r\n          img.addEventListener(\"click\", () => handleImageClick(img));\r\n        });\r\n      };\r\n\r\n      const handleImageClick = (imgElement) => {\r\n        if (window.confirm(\"¿Quieres borrar esta imagen?\")) {\r\n          const imgUrl = imgElement.src;\r\n          imgElement.remove();\r\n          deleteImageFromServer(imgUrl);\r\n        }\r\n      };\r\n\r\n      const deleteImageFromServer = async (imgUrl) => {\r\n        try {\r\n          const response = await axios.post(\r\n            `${apiUrl}/api/protocols/delete_protocol_img`,\r\n            {\r\n              img_url: imgUrl,\r\n            }\r\n          );\r\n\r\n          if (response.status !== 200) {\r\n            throw new Error(\"Error eliminando imagen del servidor\");\r\n          }\r\n\r\n          console.log(\"Imagen eliminada correctamente\");\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      };\r\n\r\n      if (prevText) {\r\n        quill.clipboard.dangerouslyPasteHTML(prevText);\r\n        setEditorContent(prevText);\r\n\r\n        attachImageClickListeners();\r\n      }\r\n\r\n      quill.on(\"text-change\", () => {\r\n        const content = quill.root.innerHTML;\r\n        setEditorContent(content);\r\n        handleTextInput(content);\r\n      });\r\n\r\n      const handleDrop = async (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        const dataTransfer = event.dataTransfer;\r\n        if (\r\n          dataTransfer &&\r\n          dataTransfer.files &&\r\n          dataTransfer.files.length > 0\r\n        ) {\r\n          const file = dataTransfer.files[0];\r\n          if (file && file.type.startsWith(\"image/\")) {\r\n            quill.root\r\n              .querySelectorAll('img[src^=\"data:image\"]')\r\n              .forEach((img) => img.remove());\r\n            uploadImage(file);\r\n          }\r\n        }\r\n      };\r\n\r\n      editorRef.current.addEventListener(\"drop\", handleDrop);\r\n\r\n      const uploadImage = async (file) => {\r\n        const quill = quillRef.current;\r\n        let range = quill.getSelection();\r\n\r\n        if (!range) {\r\n          range = { index: quill.getLength(), length: 0 };\r\n        }\r\n        try {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", file);\r\n          let response;\r\n\r\n          if (validateToken) {\r\n            response = await axios.post(\r\n              `${apiUrl}/api/protocols/upload_protocol_img`,\r\n              formData,\r\n              {\r\n                headers: { \"Content-Type\": \"multipart/form-data\" },\r\n              }\r\n            );\r\n          }\r\n\r\n          const data = response.data;\r\n          const imageUrl = data.secure_url;\r\n\r\n          console.log(\"imageUrl\", imageUrl);\r\n\r\n          quill.insertEmbed(range.index, \"image\", imageUrl);\r\n          attachImageClickListeners();\r\n        } catch (error) {\r\n          console.error(\"Subida de imagen ha fallado:\", error);\r\n        }\r\n        const placeholderImages = quill.root.querySelectorAll(\r\n          'img[src^=\"data:image\"]'\r\n        );\r\n        placeholderImages.forEach((img) => img.remove());\r\n      };\r\n\r\n      return () => {\r\n        if (editorRef.current) {\r\n          editorRef.current.removeEventListener(\"drop\", handleDrop);\r\n        }\r\n        if (quillRef.current) {\r\n          quillRef.current.off(\"text-change\");\r\n          quillRef.current.disable();\r\n          quillRef.current = null;\r\n          isInitialized.current = false;\r\n        }\r\n      };\r\n    }\r\n  }, [prevText, handleTextInput]);\r\n\r\n  return (\r\n    <div className=\"quill-text-editor-container\">\r\n      <div ref={editorRef} style={{ height: \"400px\" }}></div>\r\n      <textarea\r\n        value={editorContent}\r\n        onChange={(e) => setEditorContent(e.target.value)}\r\n        style={{ display: \"none\" }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyEditor;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport NavBar from \"../navigation/NavBar\";\r\nimport BottomBar from \"../BottomBar\";\r\nimport MyDropzone from \"../helpers/dropzone-component\";\r\nimport {\r\n  unitConversionFactors,\r\n  concentrationUnitsMatching,\r\n  correctConcentrationLogic,\r\n  decimalCommaToDot,\r\n} from \"../helpers/reactives-concentration-helper\";\r\nimport MyEditor from \"../helpers/MyEditor\";\r\nimport TravelToTop from \"../navigation/TravelToTop\";\r\nimport Loading from \"../Loading\";\r\nimport useTokenValidation from \"../helpers/useTokenValidation\";\r\nconst config = require(\"../../../env\");\r\n\r\nexport default function ProtocolForm({ mode }) {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const apiUrl = config.apiUrl;\r\n  const validateToken = useTokenValidation();\r\n\r\n  const [protocol, setProtocol] = useState({\r\n    title: \"\",\r\n    category: \"Biomoléculas-DNA\",\r\n    publication_state: \"Borrador\",\r\n    objective: \"\",\r\n    info: \"\",\r\n    confidential: \"no\",\r\n    youtube_link: \"\",\r\n  });\r\n\r\n  const [featuredImage, setFeaturedImage] = useState(null);\r\n  const [previousServerImage, setPreviousServerImage] = useState();\r\n  const [reactions, setReactions] = useState([]);\r\n  const [removeImage, setRemoveImage] = useState(false);\r\n  const [prevText, setPrevText] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (mode === \"edit\" && id && validateToken()) {\r\n      axios\r\n        .get(`${apiUrl}/api/protocols/${id}`)\r\n        .then((response) => {\r\n          setProtocol(response.data);\r\n          setReactions(response.data.reactions || []);\r\n          setPreviousServerImage(response.data.featured_image);\r\n          setPrevText(response.data.info);\r\n          setIsLoading(false);\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Error al recuperar protocolo:\", error);\r\n          setIsLoading(false);\r\n        });\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [mode, id]);\r\n\r\n  const handleImgDrop = (acceptedFiles) => {\r\n    if (acceptedFiles && acceptedFiles.length > 0) {\r\n      setFeaturedImage(acceptedFiles[0]);\r\n    } else {\r\n      setFeaturedImage(null);\r\n      setRemoveImage(true);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    for (let i = 0; i < reactions.length; i++) {\r\n      const reaction = reactions[i];\r\n      for (let j = 0; j < reaction.reactives.length; j++) {\r\n        const reactive = reaction.reactives[j];\r\n\r\n        const {\r\n          initial_concentration_value,\r\n          initial_concentration_units,\r\n          final_concentration_value,\r\n          final_concentration_units,\r\n        } = reactive;\r\n\r\n        if (\r\n          !concentrationUnitsMatching(\r\n            initial_concentration_units,\r\n            final_concentration_units\r\n          )\r\n        ) {\r\n          alert(\r\n            `Error: Las unidades de concentración inicial y final no coinciden para el reactivo ${\r\n              j + 1\r\n            } en la reacción ${i + 1}.`\r\n          );\r\n          return;\r\n        }\r\n\r\n        if (\r\n          !correctConcentrationLogic(\r\n            initial_concentration_value,\r\n            initial_concentration_units,\r\n            final_concentration_value,\r\n            final_concentration_units\r\n          )\r\n        ) {\r\n          alert(\r\n            `Error: La concentración final debe ser menor o igual que la concentración inicial para el reactivo ${\r\n              j + 1\r\n            } en la reacción ${i + 1}.`\r\n          );\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"title\", protocol.title);\r\n    formData.append(\"category\", protocol.category);\r\n    formData.append(\"publication_state\", protocol.publication_state);\r\n    formData.append(\"objective\", protocol.objective);\r\n    formData.append(\"info\", protocol.info);\r\n    formData.append(\"confidential\", protocol.confidential);\r\n    formData.append(\"youtube_link\", protocol.youtube_link);\r\n\r\n    if (featuredImage) {\r\n      formData.append(\"featured_image\", featuredImage);\r\n    } else {\r\n      formData.append(\"removeImage\", removeImage);\r\n    }\r\n\r\n    formData.append(\"reactions\", JSON.stringify(reactions));\r\n\r\n    try {\r\n      let response;\r\n      if (mode === \"creation\" && validateToken()) {\r\n        response = await axios.post(`${apiUrl}/api/protocols`, formData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        });\r\n\r\n        if (response.status === 201 || response.status === 200) {\r\n          alert(\"Protocolo creado\");\r\n          navigate(`/protocols/all-categories`);\r\n          setIsLoading(false);\r\n        }\r\n      } else if (mode === \"edit\" && validateToken()) {\r\n        response = await axios.put(`${apiUrl}/api/protocols/${id}`, formData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        });\r\n        if (response.status === 201 || response.status === 200) {\r\n          alert(\"Protocolo actualizado\");\r\n          navigate(`/protocols/protocol/${response.data.id}`);\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n      resetFormState();\r\n    } catch (error) {\r\n      console.error(\"Error Details:\", error);\r\n      alert(\"Error al enviar el formulario:\", error.message);\r\n    }\r\n  };\r\n\r\n  const addReaction = () => {\r\n    setReactions([\r\n      ...reactions,\r\n      {\r\n        title: \"\",\r\n        reactives: [\r\n          {\r\n            name: \"\",\r\n            initial_concentration_value: \"\",\r\n            initial_concentration_units: \"\",\r\n            final_concentration_value: \"\",\r\n            final_concentration_units: \"\",\r\n          },\r\n        ],\r\n        reaction_volume_value: \"\",\r\n        reaction_volume_units: \"\",\r\n        solvent: \"\",\r\n      },\r\n    ]);\r\n  };\r\n\r\n  const deleteReaction = (reactionIndex) => {\r\n    const updatedReactions = reactions.filter(\r\n      (_, index) => index !== reactionIndex\r\n    );\r\n    setReactions(updatedReactions);\r\n  };\r\n\r\n  const updateReaction = (index, field, value) => {\r\n    const updatedReactions = [...reactions];\r\n    updatedReactions[index][field] = value;\r\n    setReactions(updatedReactions);\r\n  };\r\n\r\n  const addReactive = (reactionIndex) => {\r\n    const updatedReactions = [...reactions];\r\n    updatedReactions[reactionIndex].reactives.push({\r\n      name: \"\",\r\n      initial_concentration_value: \"\",\r\n      initial_concentration_units: \"\",\r\n      final_concentration_value: \"\",\r\n      final_concentration_units: \"\",\r\n    });\r\n    setReactions(updatedReactions);\r\n  };\r\n\r\n  const deleteReactive = (reactionIndex, reactiveIndex) => {\r\n    const updatedReactions = [...reactions];\r\n    updatedReactions[reactionIndex].reactives = updatedReactions[\r\n      reactionIndex\r\n    ].reactives.filter((_, index) => index !== reactiveIndex);\r\n    setReactions(updatedReactions);\r\n  };\r\n\r\n  const updateReactiveField = (reactionIndex, reactiveIndex, field, value) => {\r\n    const hasNumbers = /\\d/.test(value);\r\n    let normalizedValue = value;\r\n\r\n    if (hasNumbers) {\r\n      normalizedValue = decimalCommaToDot(value);\r\n    }\r\n\r\n    const updatedReactions = [...reactions];\r\n    updatedReactions[reactionIndex].reactives[reactiveIndex][field] =\r\n      normalizedValue;\r\n    setReactions(updatedReactions);\r\n  };\r\n\r\n  const resetFormState = () => {\r\n    setProtocol({\r\n      title: \"\",\r\n      category: \"Biomoléculas-DNA\",\r\n      publication_state: \"Borrador\",\r\n      objective: \"\",\r\n      info: \"\",\r\n      confidential: \"no\",\r\n      youtube_link: \"\",\r\n    });\r\n\r\n    setReactions([]);\r\n    setFeaturedImage(null);\r\n    setRemoveImage(false);\r\n  };\r\n\r\n  const concentrationOptions = Object.keys(\r\n    unitConversionFactors.concentration\r\n  ).reduce((acc, key) => {\r\n    return [...acc, ...Object.keys(unitConversionFactors.concentration[key])];\r\n  }, []);\r\n\r\n  const volumeOptions = Object.keys(unitConversionFactors.volume);\r\n\r\n  const handleTextInput = useCallback((text) => {\r\n    setProtocol((prevProtocol) => ({ ...prevProtocol, info: text }));\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"protocol-form-container container\">\r\n      <NavBar />\r\n      {isLoading ? (\r\n        <Loading />\r\n      ) : (\r\n        <div className=\"protocol-form-wrapper main-wrapper\">\r\n          <TravelToTop />\r\n          <h2>{mode === \"edit\" ? \"Modificar protocolo\" : \"Nuevo protocolo\"}</h2>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"protocol-title\">\r\n              <h4>Título</h4>\r\n\r\n              <input\r\n                placeholder=\"Título\"\r\n                type=\"text\"\r\n                value={protocol.title}\r\n                onChange={(e) =>\r\n                  setProtocol({ ...protocol, title: e.target.value })\r\n                }\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"protocol-category\">\r\n              <h4>Categoría</h4>\r\n\r\n              <select\r\n                name=\"category\"\r\n                value={protocol.category}\r\n                onChange={(e) =>\r\n                  setProtocol({ ...protocol, category: e.target.value })\r\n                }\r\n              >\r\n                <option value=\"Biomoléculas-DNA\">Biomoléculas-DNA</option>\r\n                <option value=\"Biomoléculas-Proteínas\">\r\n                  Biomoléculas-Proteínas\r\n                </option>\r\n                <option value=\"Microbiología\">Microbiología</option>\r\n                <option value=\"Cultivos celulares\">Cultivos celulares</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"protocol-publication-state\">\r\n              <h4>Estado de publicación:</h4>\r\n\r\n              <select\r\n                name=\"publication_state\"\r\n                value={protocol.publication_state}\r\n                onChange={(e) =>\r\n                  setProtocol({\r\n                    ...protocol,\r\n                    publication_state: e.target.value,\r\n                  })\r\n                }\r\n              >\r\n                <option value=\"Borrador\">Borrador</option>\r\n                <option value=\"Publicado\">Publicado</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"protocol-objective\">\r\n              <h4>Objetivo</h4>\r\n\r\n              <input\r\n                placeholder=\"Objetivo\"\r\n                type=\"text\"\r\n                value={protocol.objective}\r\n                onChange={(e) =>\r\n                  setProtocol({ ...protocol, objective: e.target.value })\r\n                }\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"protocol-info\">\r\n              <h4>Texto</h4>\r\n\r\n              <MyEditor\r\n                handleTextInput={handleTextInput}\r\n                prevText={mode === \"edit\" ? prevText : \"\"}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"protocol-featured-img\">\r\n              <h4>Imagen de portada:</h4>\r\n              <div className=\"featured-img-uploader\">\r\n                <MyDropzone\r\n                  onDrop={handleImgDrop}\r\n                  previousImg={previousServerImage}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"protocol-confidential\">\r\n              <h4>Confidencialidad:</h4>\r\n\r\n              <select\r\n                name=\"confidential\"\r\n                value={protocol.confidential}\r\n                onChange={(e) =>\r\n                  setProtocol({ ...protocol, confidential: e.target.value })\r\n                }\r\n              >\r\n                <option value=\"no\">No</option>\r\n                <option value=\"Google\">Google</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"protocol-youtube-link\">\r\n              <h4>Link youtube:</h4>\r\n\r\n              <input\r\n                placeholder=\"YouTube Link\"\r\n                type=\"text\"\r\n                value={protocol.youtube_link}\r\n                onChange={(e) =>\r\n                  setProtocol({ ...protocol, youtube_link: e.target.value })\r\n                }\r\n              />\r\n            </div>\r\n\r\n            {/* Reactions section */}\r\n            <div className=\"protocol-reactions\">\r\n              <h4>Reacciones</h4>\r\n\r\n              {reactions.map((reaction, reactionIndex) => (\r\n                <div key={reactionIndex} className=\"reaction\">\r\n                  <h5>Reacción {reactionIndex + 1}</h5>\r\n                  <input\r\n                    placeholder=\"Nombre de la reacción\"\r\n                    type=\"text\"\r\n                    value={reaction.title}\r\n                    onChange={(e) =>\r\n                      updateReaction(reactionIndex, \"title\", e.target.value)\r\n                    }\r\n                    required\r\n                  />\r\n\r\n                  {reaction.reactives.map((reactive, reactiveIndex) => (\r\n                    <div key={reactiveIndex} className=\"reactive\">\r\n                      <h6>Reactivo {reactiveIndex + 1}</h6>\r\n                      <input\r\n                        placeholder=\"Nombre\"\r\n                        type=\"text\"\r\n                        value={reactive.name}\r\n                        onChange={(e) =>\r\n                          updateReactiveField(\r\n                            reactionIndex,\r\n                            reactiveIndex,\r\n                            \"name\",\r\n                            e.target.value\r\n                          )\r\n                        }\r\n                        required\r\n                      />\r\n                      <input\r\n                        placeholder=\"Concentración inicial (valor)\"\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        value={reactive.initial_concentration_value}\r\n                        onChange={(e) =>\r\n                          updateReactiveField(\r\n                            reactionIndex,\r\n                            reactiveIndex,\r\n                            \"initial_concentration_value\",\r\n                            e.target.value\r\n                          )\r\n                        }\r\n                        required\r\n                      />\r\n\r\n                      <select\r\n                        value={reactive.initial_concentration_units}\r\n                        onChange={(e) =>\r\n                          updateReactiveField(\r\n                            reactionIndex,\r\n                            reactiveIndex,\r\n                            \"initial_concentration_units\",\r\n                            e.target.value\r\n                          )\r\n                        }\r\n                        required\r\n                      >\r\n                        <option value=\"\">\r\n                          Concentración inicial (unidades)\r\n                        </option>\r\n                        {concentrationOptions.map((unit, index) => (\r\n                          <option key={index} value={unit}>\r\n                            {unit}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n\r\n                      <input\r\n                        placeholder=\"Concentración final (valor)\"\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        value={reactive.final_concentration_value}\r\n                        onChange={(e) =>\r\n                          updateReactiveField(\r\n                            reactionIndex,\r\n                            reactiveIndex,\r\n                            \"final_concentration_value\",\r\n                            e.target.value\r\n                          )\r\n                        }\r\n                        required\r\n                      />\r\n\r\n                      <select\r\n                        value={reactive.final_concentration_units}\r\n                        onChange={(e) =>\r\n                          updateReactiveField(\r\n                            reactionIndex,\r\n                            reactiveIndex,\r\n                            \"final_concentration_units\",\r\n                            e.target.value\r\n                          )\r\n                        }\r\n                        required\r\n                      >\r\n                        <option value=\"\">Concentración final (unidades)</option>\r\n                        {concentrationOptions.map((unit, index) => (\r\n                          <option key={index} value={unit}>\r\n                            {unit}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n\r\n                      <button\r\n                        className=\"btn\"\r\n                        type=\"button\"\r\n                        onClick={() =>\r\n                          deleteReactive(reactionIndex, reactiveIndex)\r\n                        }\r\n                      >\r\n                        Eliminar Reactivo\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n\r\n                  <button\r\n                    className=\"btn\"\r\n                    type=\"button\"\r\n                    onClick={() => addReactive(reactionIndex)}\r\n                  >\r\n                    Añadir Reactivo\r\n                  </button>\r\n\r\n                  <input\r\n                    placeholder=\"Volumen total reacción (valor)\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={reaction.reaction_volume_value}\r\n                    onChange={(e) =>\r\n                      updateReaction(\r\n                        reactionIndex,\r\n                        \"reaction_volume_value\",\r\n                        e.target.value\r\n                      )\r\n                    }\r\n                    required\r\n                  />\r\n\r\n                  <select\r\n                    value={reaction.reaction_volume_units}\r\n                    onChange={(e) =>\r\n                      updateReaction(\r\n                        reactionIndex,\r\n                        \"reaction_volume_units\",\r\n                        e.target.value\r\n                      )\r\n                    }\r\n                    required\r\n                  >\r\n                    <option value=\"\">Volumen total reacción (unidades)</option>\r\n                    {volumeOptions.map((unit, index) => (\r\n                      <option key={index} value={unit}>\r\n                        {unit}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n\r\n                  <input\r\n                    placeholder=\"Solvente de la reacción\"\r\n                    type=\"text\"\r\n                    value={reaction.solvent}\r\n                    onChange={(e) =>\r\n                      updateReaction(reactionIndex, \"solvent\", e.target.value)\r\n                    }\r\n                    required\r\n                  />\r\n\r\n                  <button\r\n                    className=\"btn\"\r\n                    type=\"button\"\r\n                    onClick={() => deleteReaction(reactionIndex)}\r\n                  >\r\n                    Eliminar Reacción\r\n                  </button>\r\n                </div>\r\n              ))}\r\n              <button className=\"btn\" type=\"button\" onClick={addReaction}>\r\n                Añadir reacción\r\n              </button>\r\n            </div>\r\n\r\n            <button className=\"btn\" type=\"submit\">\r\n              {mode === \"creation\" ? \"Crear protocolo\" : \"Actualizar protocolo\"}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      )}\r\n      <BottomBar />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\nimport \"quill/dist/quill.snow.css\";\r\n\r\nimport NavBar from \"../navigation/NavBar\";\r\nimport TravelToTop from \"../navigation/TravelToTop\";\r\nimport BottomBar from \"../BottomBar\";\r\nimport Loading from \"../Loading\";\r\nimport DeletionModal from \"../Modal/DeletionModal\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport useTokenValidation from \"../helpers/useTokenValidation\";\r\nimport {\r\n  unitConversionFactors,\r\n  concentrationUnitsMatching,\r\n  correctConcentrationLogic,\r\n  calculateReactiveVolume,\r\n  decimalCommaToDot,\r\n  convertVolumeUnits,\r\n} from \"../helpers/reactives-concentration-helper\";\r\nimport { useHandlePrint } from \"../helpers/usePrint\";\r\nconst config = require(\"../../../env\");\r\n\r\nconst ProtocolsProtocol = () => {\r\n  const componentRef = useRef();\r\n  const [selectorsToHide, setSelectorsToHide] = useState([]);\r\n  const handlePrint = useHandlePrint(componentRef, selectorsToHide);\r\n\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [protocol, setProtocol] = useState(null);\r\n  const apiUrl = config.apiUrl;\r\n  const [updatedReactions, setUpdatedReactions] = useState([\r\n    {\r\n      title: \"\",\r\n      reactives: [\r\n        {\r\n          name: \"\",\r\n          initial_concentration_value: 0,\r\n          initial_concentration_units: \"\",\r\n          final_concentration_value: 0,\r\n          final_concentration_units: \"\",\r\n          eliminate_from_mix: false,\r\n          reactive_volume_value: 0,\r\n          reactive_volume_units: \"\",\r\n        },\r\n      ],\r\n      reaction_volume_value: 0,\r\n      reaction_volume_units: \"\",\r\n      solvent: \"\",\r\n      solvent_volume_value: 0,\r\n      solvent_volume_units: \"\",\r\n      premix_volume_value: 0,\r\n      premix_volume_units: \"\",\r\n      extra_percent: 10,\r\n      number_samples: 1,\r\n    },\r\n  ]);\r\n\r\n  const [isLoathing, setIsLoading] = useState(true);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [isFavourite, setIsFavourite] = useState(false);\r\n  const [printTrigger, setPrintTrigger] = useState(false);\r\n\r\n  const { token, role, isAuthenticated } = useSelector((state) => state.auth);\r\n  const validateToken = useTokenValidation();\r\n\r\n  const concentrationOptions = Object.keys(\r\n    unitConversionFactors.concentration\r\n  ).reduce((acc, key) => {\r\n    return [...acc, ...Object.keys(unitConversionFactors.concentration[key])];\r\n  }, []);\r\n\r\n  const volumeOptions = Object.keys(unitConversionFactors.volume);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${apiUrl}/api/protocols/${id}`)\r\n      .then((response) => {\r\n        setProtocol(response.data);\r\n        const mergedReactions = mergeWithDefaults(response.data.reactions);\r\n        setUpdatedReactions(mergedReactions);\r\n\r\n        if (token && isAuthenticated && validateToken()) {\r\n          axios\r\n            .post(`${apiUrl}/api/protocols/favourite/check`, {\r\n              protocol_id: response.data.id,\r\n            })\r\n            .then((response) => {\r\n              setIsFavourite(response.data.isFavourite);\r\n            });\r\n        }\r\n        setIsLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        alert(\"Error obteniendo protocolo:\", error);\r\n        navigate(\"/protocols\");\r\n      });\r\n  }, [id]);\r\n\r\n  const mergeWithDefaults = (reactionsFromAPI) => {\r\n    const initialReactions = reactionsFromAPI.map((reaction) => ({\r\n      ...updatedReactions[0],\r\n      ...reaction,\r\n      solvent_volume_units: reaction.reaction_volume_units,\r\n      premix_volume_units: reaction.reaction_volume_units,\r\n      reactives: reaction.reactives.map((reactive) => ({\r\n        ...updatedReactions[0].reactives[0],\r\n        ...reactive,\r\n        reactive_volume_units: reaction.reaction_volume_units,\r\n      })),\r\n    }));\r\n\r\n    return initialReactions.map((reaction) => {\r\n      return recalculateVolumes(reaction);\r\n    });\r\n  };\r\n\r\n  const recalculateVolumes = (reaction) => {\r\n    const updatedReactives = reaction.reactives.map((reactive) => {\r\n      const calculatedValue = handleReactiveVolumeCalculation(\r\n        reaction.extra_percent,\r\n        reaction.number_samples,\r\n        reaction.reaction_volume_value,\r\n        reaction.reaction_volume_units,\r\n        reactive.initial_concentration_value,\r\n        reactive.initial_concentration_units,\r\n        reactive.final_concentration_value,\r\n        reactive.final_concentration_units\r\n      );\r\n\r\n      const finalReactiveVolume = convertVolumeUnits(\r\n        calculatedValue,\r\n        reaction.reaction_volume_units,\r\n        reactive.reactive_volume_units\r\n      );\r\n\r\n      return {\r\n        ...reactive,\r\n        reactive_volume_value: parseFloat(finalReactiveVolume.toFixed(3)),\r\n      };\r\n    });\r\n\r\n    const totalReactiveVolume = updatedReactives.reduce(\r\n      (total, reactive) =>\r\n        total +\r\n        convertVolumeUnits(\r\n          reactive.reactive_volume_value || 0,\r\n          reactive.reactive_volume_units,\r\n          reaction.reaction_volume_units\r\n        ),\r\n      0\r\n    );\r\n\r\n    const solventVolumeValue = convertVolumeUnits(\r\n      ((reaction.reaction_volume_value * (reaction.extra_percent + 100)) /\r\n        100) *\r\n        reaction.number_samples -\r\n        totalReactiveVolume,\r\n      reaction.reaction_volume_units,\r\n      reaction.solvent_volume_units\r\n    );\r\n\r\n    const totalReactiveVolumeSeparate = updatedReactives.reduce(\r\n      (total, reactive) => {\r\n        if (reactive.eliminate_from_mix) {\r\n          return (\r\n            total +\r\n            convertVolumeUnits(\r\n              reactive.reactive_volume_value || 0,\r\n              reactive.reactive_volume_units,\r\n              reaction.reaction_volume_units\r\n            )\r\n          );\r\n        }\r\n        return total;\r\n      },\r\n      0\r\n    );\r\n\r\n    const premixVolumeValue = convertVolumeUnits(\r\n      (totalReactiveVolume + solventVolumeValue - totalReactiveVolumeSeparate) /\r\n        ((reaction.number_samples * (reaction.extra_percent + 100)) / 100),\r\n      reaction.reaction_volume_units,\r\n      reaction.premix_volume_units\r\n    );\r\n\r\n    return {\r\n      ...reaction,\r\n      reactives: updatedReactives,\r\n      solvent_volume_value: parseFloat(solventVolumeValue.toFixed(3)),\r\n      premix_volume_value: parseFloat(premixVolumeValue.toFixed(3)),\r\n    };\r\n  };\r\n\r\n  const handleReactionReactiveChange = (\r\n    reactionIndex,\r\n    reactiveIndex,\r\n    field,\r\n    value\r\n  ) => {\r\n    setUpdatedReactions((prevReactions) => {\r\n      const newReactions = prevReactions.map((reaction, rIdx) => {\r\n        if (rIdx !== reactionIndex) return reaction;\r\n\r\n        let updatedReaction = { ...reaction };\r\n        // Cambio a nivel de reacción\r\n        if (reactiveIndex === null) {\r\n          if (field === \"reaction_volume_units\") {\r\n            const newVolumeValue = convertVolumeUnits(\r\n              reaction.reaction_volume_value,\r\n              reaction.reaction_volume_units,\r\n              value\r\n            );\r\n\r\n            updatedReaction = {\r\n              ...reaction,\r\n              reaction_volume_value: parseFloat(newVolumeValue.toFixed(3)),\r\n              [field]: value,\r\n            };\r\n          } else if (field === \"solvent_volume_units\") {\r\n            const newVolumeValue = convertVolumeUnits(\r\n              reaction.solvent_volume_value,\r\n              reaction.solvent_volume_units,\r\n              value\r\n            );\r\n\r\n            updatedReaction = {\r\n              ...reaction,\r\n              solvent_volume_value: parseFloat(newVolumeValue.toFixed(3)),\r\n              [field]: value,\r\n            };\r\n          } else if (field === \"premix_volume_units\") {\r\n            const newVolumeValue = convertVolumeUnits(\r\n              reaction.premix_volume_value,\r\n              reaction.premix_volume_units,\r\n              value\r\n            );\r\n\r\n            updatedReaction = {\r\n              ...reaction,\r\n              premix_volume_value: parseFloat(newVolumeValue.toFixed(3)),\r\n              [field]: value,\r\n            };\r\n          } else {\r\n            updatedReaction = {\r\n              ...reaction,\r\n              [field]: value,\r\n            };\r\n          }\r\n        } else {\r\n          // cambio a nivel de reactivo\r\n          updatedReaction = {\r\n            ...reaction,\r\n            reactives: reaction.reactives.map((reactive, reIdx) => {\r\n              if (reIdx === reactiveIndex) {\r\n                if (field === \"reactive_volume_units\") {\r\n                  const newVolumeValue = convertVolumeUnits(\r\n                    reactive.reactive_volume_value,\r\n                    reactive.reactive_volume_units,\r\n                    value\r\n                  );\r\n                  return {\r\n                    ...reactive,\r\n                    reactive_volume_value: parseFloat(\r\n                      newVolumeValue.toFixed(3)\r\n                    ),\r\n                    [field]: value,\r\n                  };\r\n                }\r\n                return {\r\n                  ...reactive,\r\n                  [field]: value,\r\n                };\r\n              }\r\n              return reactive;\r\n            }),\r\n          };\r\n        }\r\n\r\n        return recalculateVolumes(updatedReaction);\r\n      });\r\n\r\n      return newReactions;\r\n    });\r\n  };\r\n\r\n  const addReactive = (reactions, reactionIndex) => {\r\n    const updatedReactions = [...reactions];\r\n    const reaction = updatedReactions[reactionIndex];\r\n\r\n    updatedReactions[reactionIndex].reactives.push({\r\n      name: \"Nuevo reactivo\",\r\n      initial_concentration_value: 0,\r\n      initial_concentration_units: \"M\",\r\n      final_concentration_value: 0,\r\n      final_concentration_units: \"M\",\r\n      eliminate_from_mix: false,\r\n      reactive_volume_value: 0,\r\n      reactive_volume_units: reaction.reaction_volume_units || \"nL\",\r\n    });\r\n\r\n    setUpdatedReactions(updatedReactions);\r\n  };\r\n\r\n  const deleteReactive = (reactions, reactionIndex, reactiveIndex) => {\r\n    const updatedReactions = [...reactions];\r\n    const reaction = updatedReactions[reactionIndex];\r\n    const reactive = reaction.reactives[reactiveIndex];\r\n    const reactiveVolumeValue = reactive.reactive_volume_value;\r\n    const reactiveVolumeUnits = reactive.reactive_volume_units;\r\n\r\n    updatedReactions[reactionIndex].reactives = updatedReactions[\r\n      reactionIndex\r\n    ].reactives.filter((_, index) => index !== reactiveIndex);\r\n\r\n    updatedReactions[reactionIndex] = {\r\n      ...reaction,\r\n      solvent_volume_value: parseFloat(\r\n        (\r\n          reaction.solvent_volume_value +\r\n          convertVolumeUnits(\r\n            reactiveVolumeValue,\r\n            reactiveVolumeUnits,\r\n            reaction.solvent_volume_units\r\n          )\r\n        ).toFixed(3)\r\n      ),\r\n    };\r\n\r\n    setUpdatedReactions(updatedReactions);\r\n  };\r\n\r\n  const eliminateOrAddReactiveMix = (reactionIndex, reactiveIndex) => {\r\n    setUpdatedReactions((prevReactions) => {\r\n      const updatedReactions = prevReactions.map((reaction, rIdx) => {\r\n        if (rIdx !== reactionIndex) return reaction;\r\n\r\n        const updatedReactives = reaction.reactives.map((reactive, reIdx) => {\r\n          if (reIdx === reactiveIndex) {\r\n            return {\r\n              ...reactive,\r\n              eliminate_from_mix: !reactive.eliminate_from_mix,\r\n            };\r\n          }\r\n          return reactive;\r\n        });\r\n\r\n        const updatedReaction = {\r\n          ...reaction,\r\n          reactives: updatedReactives,\r\n        };\r\n\r\n        return recalculateVolumes(updatedReaction);\r\n      });\r\n\r\n      return updatedReactions;\r\n    });\r\n  };\r\n\r\n  const handleDeleteClick = () => {\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleSuccesfulProtocolDeletion = () => {\r\n    navigate(\"/protocols\");\r\n  };\r\n\r\n  const handleModalClose = () => {\r\n    setModalOpen(false);\r\n  };\r\n\r\n  const handleEditClick = (id) => {\r\n    navigate(`/update-protocol/${id}`);\r\n  };\r\n\r\n  const handleFavouriteClick = (id) => {\r\n    if (!isFavourite && validateToken()) {\r\n      axios\r\n        .post(`${apiUrl}/api/protocols/favourite`, { protocol_id: id })\r\n        .then((response) => {\r\n          setIsFavourite(true);\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Error marcando como favorito:\", error);\r\n        });\r\n    } else if (validateToken()) {\r\n      axios\r\n        .delete(`${apiUrl}/api/protocols/favourite`, {\r\n          data: { protocol_id: id },\r\n        })\r\n        .then((response) => {\r\n          setIsFavourite(false);\r\n        })\r\n        .catch((error) => {\r\n          alert(\"Error eliminando de favoritos:\", error);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleReactiveVolumeCalculation = (\r\n    extraPercent,\r\n    numberSamples,\r\n    reactionVolumeValue,\r\n    reactionVolumeUnits,\r\n    initialConcentrationValue,\r\n    initialConcentrationUnits,\r\n    finalConcentrationValue,\r\n    finalConcentrationUnits\r\n  ) => {\r\n    const normalizedExtraPercent = decimalCommaToDot(extraPercent);\r\n    const normalizedNumberSamples = decimalCommaToDot(numberSamples);\r\n    const normalizedInitialConcentrationValue = decimalCommaToDot(\r\n      initialConcentrationValue\r\n    );\r\n    const normalizedFinalConcentrationValue = decimalCommaToDot(\r\n      finalConcentrationValue\r\n    );\r\n    const normalizedReactionVolumeValue =\r\n      decimalCommaToDot(reactionVolumeValue);\r\n\r\n    if (\r\n      concentrationUnitsMatching(\r\n        initialConcentrationUnits,\r\n        finalConcentrationUnits\r\n      ) &&\r\n      correctConcentrationLogic(\r\n        normalizedInitialConcentrationValue,\r\n        initialConcentrationUnits,\r\n        normalizedFinalConcentrationValue,\r\n        finalConcentrationUnits\r\n      )\r\n    ) {\r\n      const { reactiveVolumeValue } = calculateReactiveVolume(\r\n        normalizedReactionVolumeValue,\r\n        reactionVolumeUnits,\r\n        normalizedInitialConcentrationValue,\r\n        initialConcentrationUnits,\r\n        normalizedFinalConcentrationValue,\r\n        finalConcentrationUnits\r\n      );\r\n\r\n      const finalResult =\r\n        reactiveVolumeValue *\r\n        normalizedNumberSamples *\r\n        ((100 + normalizedExtraPercent) / 100);\r\n\r\n      return finalResult;\r\n    } else {\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  const tableRender = (\r\n    reactions,\r\n    reactionIndex,\r\n    reactive,\r\n    reactiveIndex,\r\n    eliminatedFromMix\r\n  ) => {\r\n    return (\r\n      <React.Fragment key={reactiveIndex}>\r\n        <div className=\"grid-row\">\r\n          <input\r\n            className=\"reactive-name\"\r\n            type=\"text\"\r\n            value={reactive.name}\r\n            onChange={(e) =>\r\n              handleReactionReactiveChange(\r\n                reactionIndex,\r\n                reactiveIndex,\r\n                \"name\",\r\n                e.target.value\r\n              )\r\n            }\r\n          />\r\n\r\n          <input\r\n            type=\"number\"\r\n            value={\r\n              reactive.reactive_volume_value !== 0\r\n                ? eliminatedFromMix\r\n                  ? parseFloat(\r\n                      (\r\n                        reactive.reactive_volume_value /\r\n                        (((reactions[reactionIndex].extra_percent + 100) *\r\n                          reactions[reactionIndex].number_samples) /\r\n                          100)\r\n                      ).toFixed(3)\r\n                    )\r\n                  : reactive.reactive_volume_value\r\n                : \"\"\r\n            }\r\n            readOnly\r\n          />\r\n\r\n          <select\r\n            value={reactive.reactive_volume_units}\r\n            onChange={(e) =>\r\n              handleReactionReactiveChange(\r\n                reactionIndex,\r\n                reactiveIndex,\r\n                \"reactive_volume_units\",\r\n                e.target.value\r\n              )\r\n            }\r\n          >\r\n            {volumeOptions.map((unit, index) => (\r\n              <option key={index} value={unit}>\r\n                {unit}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          <input\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={reactive.initial_concentration_value}\r\n            onChange={(e) =>\r\n              handleReactionReactiveChange(\r\n                reactionIndex,\r\n                reactiveIndex,\r\n                \"initial_concentration_value\",\r\n                decimalCommaToDot(e.target.value)\r\n              )\r\n            }\r\n          />\r\n\r\n          <select\r\n            value={reactive.initial_concentration_units}\r\n            onChange={(e) =>\r\n              handleReactionReactiveChange(\r\n                reactionIndex,\r\n                reactiveIndex,\r\n                \"initial_concentration_units\",\r\n                e.target.value\r\n              )\r\n            }\r\n          >\r\n            {concentrationOptions.map((unit, index) => (\r\n              <option key={index} value={unit}>\r\n                {unit}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          <input\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={reactive.final_concentration_value}\r\n            onChange={(e) =>\r\n              handleReactionReactiveChange(\r\n                reactionIndex,\r\n                reactiveIndex,\r\n                \"final_concentration_value\",\r\n                decimalCommaToDot(e.target.value)\r\n              )\r\n            }\r\n          />\r\n\r\n          <select\r\n            value={reactive.final_concentration_units}\r\n            onChange={(e) =>\r\n              handleReactionReactiveChange(\r\n                reactionIndex,\r\n                reactiveIndex,\r\n                \"final_concentration_units\",\r\n                e.target.value\r\n              )\r\n            }\r\n          >\r\n            {concentrationOptions.map((unit, index) => (\r\n              <option key={index} value={unit}>\r\n                {unit}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"grid-row-btns\">\r\n          <button\r\n            className=\"btn\"\r\n            onClick={() =>\r\n              eliminateOrAddReactiveMix(reactionIndex, reactiveIndex)\r\n            }\r\n          >\r\n            {reactive.eliminate_from_mix\r\n              ? \"Añadir al premix\"\r\n              : \"Quitar del premix\"}\r\n          </button>\r\n\r\n          <button\r\n            className=\"btn\"\r\n            onClick={() =>\r\n              deleteReactive(reactions, reactionIndex, reactiveIndex)\r\n            }\r\n          >\r\n            Quitar de la reacción\r\n          </button>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  const getYouTubeVideoID = (url) => {\r\n    const regex =\r\n      /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\r\n    const match = url.match(regex);\r\n    return match ? `https://www.youtube.com/embed/${match[1]}` : null;\r\n  };\r\n\r\n  const handleDownload = (infoToDownload) => {\r\n    let commonSelectorsToHide = [\r\n      \".btn\",\r\n      \".navbar-wrapper\",\r\n      \".youtube-video-wrapper\",\r\n      \".protocol-featured-image\",\r\n      \".download-wrapper\",\r\n    ];\r\n\r\n    if (infoToDownload === \"pdf-complete\") {\r\n      setSelectorsToHide([...commonSelectorsToHide]);\r\n    } else if (infoToDownload === \"pdf-protocol\") {\r\n      setSelectorsToHide([\r\n        ...commonSelectorsToHide,\r\n        \".calculation-to-download\",\r\n      ]);\r\n    } else if (infoToDownload === \"pdf-reactions\") {\r\n      setSelectorsToHide([...commonSelectorsToHide, \".protocol-to-download\"]);\r\n    }\r\n\r\n    setPrintTrigger(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (printTrigger) {\r\n      handlePrint();\r\n      setPrintTrigger(false);\r\n    }\r\n  }, [printTrigger, handlePrint]);\r\n\r\n  return (\r\n    <div ref={componentRef} className=\"protocol-container container\">\r\n      <NavBar />\r\n\r\n      {!isLoathing && protocol ? (\r\n        <div className=\"protocol-wrapper main-wrapper protocol-complete-to-download\">\r\n          <DeletionModal\r\n            isOpen={modalOpen}\r\n            handleModalClose={handleModalClose}\r\n            protocolId={protocol.id}\r\n            protocolTitle={protocol.title}\r\n            handleSuccesfulProtocolDeletion={handleSuccesfulProtocolDeletion}\r\n            token={token}\r\n            callingComponent=\"protocols\"\r\n          />\r\n          <TravelToTop />\r\n\r\n          <div className=\"protocol-top-wrapper protocol-to-download\">\r\n            <div className=\"protocol-title-wrapper\">\r\n              <div className=\"protocol-title\">\r\n                <h2>{protocol.title}</h2>\r\n              </div>\r\n\r\n              <div className=\"protocol-activity-icons-wrapper\">\r\n                {role === \"admin\" ? (\r\n                  <h4>{protocol.publication_state}</h4>\r\n                ) : null}\r\n                <div className=\"protocol-action-elements\">\r\n                  {isAuthenticated && role === \"admin\" ? (\r\n                    <div className=\"admin-icons\">\r\n                      <FontAwesomeIcon\r\n                        className=\"edition-icon activity-icon\"\r\n                        onClick={() => handleEditClick(protocol.id)}\r\n                        icon=\"fa-file-pen\"\r\n                        size=\"lg\"\r\n                      />\r\n\r\n                      <FontAwesomeIcon\r\n                        className=\"delete-icon activity-icon\"\r\n                        onClick={handleDeleteClick}\r\n                        icon=\"fa-trash\"\r\n                        size=\"lg\"\r\n                      />\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {protocol.featured_image && (\r\n            <div className=\"protocol-featured-image\">\r\n              <img src={protocol.featured_image} alt=\"Featured-img\" />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"download-wrapper\">\r\n            {isAuthenticated ? (\r\n              isFavourite ? (\r\n                <FontAwesomeIcon\r\n                  className=\"empty-heart-icon activity-icon favourite-icon\"\r\n                  onClick={() => handleFavouriteClick(protocol.id)}\r\n                  icon=\"fas fa-heart\"\r\n                  size=\"lg\"\r\n                />\r\n              ) : (\r\n                <FontAwesomeIcon\r\n                  className=\"empty-heart-icon activity-icon favourite-icon\"\r\n                  onClick={() => handleFavouriteClick(protocol.id)}\r\n                  icon=\"far fa-heart\"\r\n                  size=\"lg\"\r\n                />\r\n              )\r\n            ) : null}\r\n\r\n            <div\r\n              className=\"download-icon activity-icon\"\r\n              onClick={() => handleDownload(\"pdf-complete\")}\r\n            >\r\n              <FontAwesomeIcon icon=\"fa-file-pdf\" size=\"lg\" /> Completo\r\n            </div>\r\n\r\n            <div\r\n              className=\"download-icon activity-icon\"\r\n              onClick={() => handleDownload(\"pdf-protocol\")}\r\n            >\r\n              <FontAwesomeIcon icon=\"fa-file-pdf\" size=\"lg\" /> Protocolo\r\n            </div>\r\n\r\n            <div\r\n              className=\"download-icon activity-icon\"\r\n              onClick={() => handleDownload(\"pdf-reactions\")}\r\n            >\r\n              <FontAwesomeIcon icon=\"fa-file-pdf\" size=\"lg\" /> Cálculos\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"protocol-objective protocol-to-download\">\r\n            <h3>Objetivo</h3>\r\n            <p>{protocol.objective}</p>\r\n          </div>\r\n\r\n          <div className=\"protocol-info protocol-to-download\">\r\n            <h3>Procedimiento experimental</h3>\r\n            <div\r\n              className=\"protocol-info-text ql-editor\"\r\n              dangerouslySetInnerHTML={{ __html: protocol.info }}\r\n            />\r\n          </div>\r\n\r\n          {updatedReactions.length !== 0 ? (\r\n            <div className=\"protocol-reactions calculation-to-download\">\r\n              <h4>Reacciones</h4>\r\n\r\n              {updatedReactions.map((reaction, reactionIndex) => {\r\n                const excludedReactives = reaction.reactives.filter(\r\n                  (reactive) => reactive.eliminate_from_mix === true\r\n                );\r\n\r\n                return (\r\n                  <div key={reactionIndex} className=\"reaction\">\r\n                    <h5>{reaction.title}</h5>\r\n                    <div className=\"reaction-header-wrapper\">\r\n                      <div className=\"extra-percent-wrapper\">\r\n                        <h5>Porcentaje extra (%)</h5>\r\n                        <input\r\n                          type=\"number\"\r\n                          step=\"1\"\r\n                          value={reaction.extra_percent}\r\n                          onChange={(e) =>\r\n                            handleReactionReactiveChange(\r\n                              reactionIndex,\r\n                              null,\r\n                              \"extra_percent\",\r\n                              decimalCommaToDot(e.target.value)\r\n                            )\r\n                          }\r\n                        />\r\n                      </div>\r\n                      <div className=\"reaction-volume-wrapper\">\r\n                        <h5>Volumen de reacción</h5>\r\n                        <input\r\n                          type=\"number\"\r\n                          step=\"0.01\"\r\n                          value={reaction.reaction_volume_value}\r\n                          onChange={(e) =>\r\n                            handleReactionReactiveChange(\r\n                              reactionIndex,\r\n                              null,\r\n                              \"reaction_volume_value\",\r\n                              decimalCommaToDot(e.target.value)\r\n                            )\r\n                          }\r\n                        />\r\n                        <select\r\n                          value={reaction.reaction_volume_units}\r\n                          onChange={(e) =>\r\n                            handleReactionReactiveChange(\r\n                              reactionIndex,\r\n                              null,\r\n                              \"reaction_volume_units\",\r\n                              e.target.value\r\n                            )\r\n                          }\r\n                        >\r\n                          {volumeOptions.map((unit, index) => (\r\n                            <option key={index} value={unit}>\r\n                              {unit}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"number-samples\">\r\n                        <h5>Número de muestras</h5>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={reaction.number_samples}\r\n                          onChange={(e) =>\r\n                            handleReactionReactiveChange(\r\n                              reactionIndex,\r\n                              null,\r\n                              \"number_samples\",\r\n                              decimalCommaToDot(e.target.value)\r\n                            )\r\n                          }\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <h4>Reactivos incluidos en el premix</h4>\r\n                    <span className=\"small-note\">\r\n                      Nota: si un volumen de reactivo desaparece, revisa sus\r\n                      unidades\r\n                    </span>\r\n                    <div className=\"reaction-table-container\">\r\n                      <div className=\"reaction-table reaction-table-inside-mix\">\r\n                        <div className=\"grid-header\">\r\n                          <div>Reactivo</div>\r\n                          <div>Volumen</div>\r\n                          <div>Concentración Inicial</div>\r\n                          <div>Concentración Final</div>\r\n                        </div>\r\n\r\n                        {reaction.reactives.map((reactive, reactiveIndex) =>\r\n                          !reactive.eliminate_from_mix\r\n                            ? tableRender(\r\n                                updatedReactions,\r\n                                reactionIndex,\r\n                                reactive,\r\n                                reactiveIndex,\r\n                                reactive.eliminate_from_mix\r\n                              )\r\n                            : null\r\n                        )}\r\n\r\n                        <div className=\"grid-row\">\r\n                          <input\r\n                            type=\"text\"\r\n                            value={reaction.solvent}\r\n                            onChange={(e) =>\r\n                              handleReactionReactiveChange(\r\n                                reactionIndex,\r\n                                null,\r\n                                \"name\",\r\n                                e.target.value\r\n                              )\r\n                            }\r\n                          />\r\n\r\n                          <input\r\n                            type=\"number\"\r\n                            value={reaction.solvent_volume_value}\r\n                            readOnly\r\n                          />\r\n\r\n                          <select\r\n                            value={reaction.solvent_volume_units}\r\n                            onChange={(e) =>\r\n                              handleReactionReactiveChange(\r\n                                reactionIndex,\r\n                                null,\r\n                                \"solvent_volume_units\",\r\n                                e.target.value\r\n                              )\r\n                            }\r\n                          >\r\n                            {volumeOptions.map((unit, index) => (\r\n                              <option key={index} value={unit}>\r\n                                {unit}\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n                        </div>\r\n\r\n                        <button\r\n                          className=\"btn\"\r\n                          onClick={() =>\r\n                            addReactive(updatedReactions, reactionIndex)\r\n                          }\r\n                          style={{ marginTop: \"20px\" }}\r\n                        >\r\n                          Añadir nuevo reactivo\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {excludedReactives.length > 0 ? (\r\n                      <div className=\"excluded-reactions-table-container\">\r\n                        <div key={`premix-${reactionIndex}`}>\r\n                          <h4>Volumen de premix por muestra</h4>\r\n\r\n                          <input\r\n                            type=\"number\"\r\n                            value={reaction.premix_volume_value}\r\n                            readOnly\r\n                          />\r\n\r\n                          <select\r\n                            value={reaction.premix_volume_units}\r\n                            onChange={(e) =>\r\n                              handleReactionReactiveChange(\r\n                                reactionIndex,\r\n                                null,\r\n                                \"premix_volume_units\",\r\n                                e.target.value\r\n                              )\r\n                            }\r\n                          >\r\n                            {volumeOptions.map((unit, index) => (\r\n                              <option key={index} value={unit}>\r\n                                {unit}\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n                        </div>\r\n\r\n                        <h4>\r\n                          Reactivos excluidos del mix (añadir por separado)\r\n                        </h4>\r\n\r\n                        <div className=\"reaction-table-container\">\r\n                          <div className=\"reaction-table reaction-table-outside-mix\">\r\n                            <div className=\"grid-header\">\r\n                              <div>Reactivo</div>\r\n                              <div>Volumen</div>\r\n                              <div>Concentración Inicial</div>\r\n                              <div>Concentración Final</div>\r\n                            </div>\r\n\r\n                            {reaction.reactives.map((reactive, reactiveIndex) =>\r\n                              reactive.eliminate_from_mix\r\n                                ? tableRender(\r\n                                    updatedReactions,\r\n                                    reactionIndex,\r\n                                    reactive,\r\n                                    reactiveIndex,\r\n                                    reactive.eliminate_from_mix\r\n                                  )\r\n                                : null\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : null}\r\n\r\n          {protocol.youtube_link ? (\r\n            <div className=\"youtube-video-wrapper\">\r\n              <div className=\"youtube-video-title\">\r\n                <h4>Vídeo explicativo</h4>\r\n              </div>\r\n\r\n              <div className=\"youtube-video-text\">\r\n                Vídeo en el que se explica la teoría relacionada con el\r\n                procedimiento experimental.\r\n              </div>\r\n\r\n              <div className=\"youtube-video-embeded-video\">\r\n                <iframe\r\n                  width=\"560\"\r\n                  height=\"315\"\r\n                  src={getYouTubeVideoID(protocol.youtube_link)}\r\n                  title=\"YouTube video player\"\r\n                  frameBorder=\"0\"\r\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\r\n                  referrerPolicy=\"strict-origin-when-cross-origin\"\r\n                  allowFullScreen\r\n                ></iframe>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      ) : (\r\n        <Loading />\r\n      )}\r\n\r\n      <BottomBar />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProtocolsProtocol;\r\n","import { useReactToPrint } from \"react-to-print\";\r\n\r\nexport const useHandlePrint = (contentRef, selectorsToHide) => {\r\n  return useReactToPrint({\r\n    content: () => contentRef.current,\r\n    onBeforeGetContent: () => {\r\n      return new Promise((resolve) => {\r\n        selectorsToHide.forEach((selector) => {\r\n          const elements = contentRef.current.querySelectorAll(selector);\r\n          if (elements.length > 0) {\r\n            elements.forEach((element) => (element.style.setProperty('display', 'none', 'important')));\r\n          }\r\n        });\r\n\r\n        setTimeout(() => resolve(), 500);\r\n      });\r\n    },\r\n    onAfterPrint: () => {\r\n      selectorsToHide.forEach((selector) => {\r\n        const elements = contentRef.current.querySelectorAll(selector);\r\n        if (elements.length > 0) {\r\n          elements.forEach((element) => (element.style.display = \"\"));\r\n        }\r\n      });\r\n    },\r\n  });\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport \"../style/main.scss\";\r\nimport { setUserInfo } from \"../actions/authAction\";\r\nimport {\r\n  getUserInfoFromToken,\r\n  isAuthenticated as checkAuth,\r\n} from \"./helpers/jwt-decoder\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nimport Home from \"./Home\";\r\nimport Login from \"./authentication/Login\";\r\nimport ProtocolsContainer from \"./protocols/ProtocolsContainer\";\r\nimport iconHelper from \"./helpers/icon-helper\";\r\nimport EmailSent from \"./authentication/EmailSent\";\r\nimport UsersManagement from \"./users/UsersManagement\";\r\nimport AccountManagement from \"./users/AccountManagement\";\r\nimport Loading from \"./Loading\";\r\nimport ProtocolForm from \"./protocols/ProtocolForm\";\r\nimport ProtocolsProtocol from \"./protocols/ProtocolsProtocol\";\r\nimport { logout } from \"../actions/authAction\";\r\n\r\nconst AppInitializer = () => {\r\n  const dispatch = useDispatch();\r\n  const [localAuthLoading, setLocalAuthLoading] = useState(true);\r\n\r\n  const { role, isAuthenticated, authLoading } = useSelector(\r\n    (state) => state.auth\r\n  );\r\n\r\n  iconHelper();\r\n\r\n  axios.interceptors.request.use(\r\n    async (config) => {\r\n      const token = localStorage.getItem(\"authToken\");\r\n\r\n      if (token) {\r\n        const decodedToken = jwtDecode(token);\r\n        const currentTime = Date.now() / 1000;\r\n\r\n        if (decodedToken.exp < currentTime) {\r\n          localStorage.removeItem(\"authToken\");\r\n          store.dispatch(logout());\r\n          return Promise.reject(\"Token expirado. Por favor, inicia sesión de nuevo.\");\r\n        } else {\r\n          config.headers[\"Authorization\"] = `Bearer ${token}`;\r\n        }\r\n      }\r\n      return config;\r\n    },\r\n    (error) => {\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    const initializeAuth = async () => {\r\n      try {\r\n        const isAuth = await checkAuth();\r\n        if (isAuth) {\r\n          const { userInfo, token } = await getUserInfoFromToken();\r\n          if (userInfo && token) {\r\n            dispatch(\r\n              setUserInfo({\r\n                id: userInfo.id,\r\n                role: userInfo.role,\r\n                company: userInfo.company,\r\n                username: userInfo.username,\r\n                email: userInfo.email,\r\n                token: token,\r\n              })\r\n            );\r\n          }\r\n        } else {\r\n          dispatch({ type: \"FINISH_AUTH_LOADING\" });\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error initializing auth:\", error);\r\n      } finally {\r\n        setLocalAuthLoading(false);\r\n      }\r\n    };\r\n\r\n    initializeAuth();\r\n  }, [dispatch]);\r\n\r\n  const combinedLoadingState = localAuthLoading || authLoading;\r\n\r\n  const routesGuard = (role, isAuthenticated, loading) => {\r\n    const commonRoutes = [\r\n      <Route key=\"home\" path=\"/\" element={<Home />} />,\r\n      <Route\r\n        key=\"protocols-category\"\r\n        path=\"/protocols/:category\"\r\n        element={<ProtocolsContainer />}\r\n      />,\r\n      <Route\r\n        key=\"protocols-search\"\r\n        path=\"/protocols\"\r\n        element={<ProtocolsContainer />}\r\n      />,\r\n      <Route\r\n        key=\"protocols-protocol\"\r\n        path=\"/protocols/protocol/:id\"\r\n        element={<ProtocolsProtocol />}\r\n      />,\r\n      <Route key=\"email-sent\" path=\"/email-sent\" element={<EmailSent />} />,\r\n    ];\r\n\r\n    const nonAuthRoutes = [\r\n      <Route key=\"login\" path=\"/login\" element={<Login />} />,\r\n    ];\r\n\r\n    const authUserRoutes = [\r\n      <Route\r\n        key=\"favourites-category\"\r\n        path=\"/favourites/:category\"\r\n        element={\r\n          <ProtocolsContainer\r\n            key={`favourites-search-${location.pathname}`}\r\n            showFavouritesOnly={true}\r\n          />\r\n        }\r\n      />,\r\n      <Route\r\n        key=\"favourites-search\"\r\n        path=\"/favourites\"\r\n        element={\r\n          <ProtocolsContainer\r\n            key={`favourites-search-${location.pathname}`}\r\n            showFavouritesOnly={true}\r\n          />\r\n        }\r\n      />,\r\n      <Route\r\n        key=\"account-management\"\r\n        path=\"/account-management\"\r\n        element={<AccountManagement />}\r\n      />,\r\n    ];\r\n\r\n    const authAdminRoutes = [\r\n      <Route\r\n        key=\"users-management\"\r\n        path=\"/users-management\"\r\n        element={<UsersManagement />}\r\n      />,\r\n      <Route\r\n        key=\"protocol-creation\"\r\n        path=\"/new-protocol\"\r\n        element={<ProtocolForm mode=\"creation\" />}\r\n      />,\r\n      <Route\r\n        key=\"protocol-update\"\r\n        path=\"/update-protocol/:id\"\r\n        element={<ProtocolForm mode=\"edit\" />}\r\n      />,\r\n    ];\r\n\r\n    const notFoundRoutes = [\r\n      <Route key=\"not-found\" path=\"*\" element={<Navigate to=\"/\" replace />} />,\r\n    ];\r\n\r\n    if (!loading) {\r\n      {\r\n        if (!isAuthenticated) {\r\n          return [...commonRoutes, ...nonAuthRoutes, ...notFoundRoutes];\r\n        } else if (isAuthenticated && role === \"admin\") {\r\n          return [\r\n            ...commonRoutes,\r\n            ...authUserRoutes,\r\n            ...authAdminRoutes,\r\n            ...notFoundRoutes,\r\n          ];\r\n        } else if (isAuthenticated && role === \"user\") {\r\n          return [...commonRoutes, ...authUserRoutes, ...notFoundRoutes];\r\n        } else {\r\n          return [...nonAuthRoutes, ...commonRoutes, ...notFoundRoutes];\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Routes>\r\n        {combinedLoadingState ? (\r\n          <Route key=\"loading\" path=\"*\" element={<Loading />} />\r\n        ) : (\r\n          routesGuard(role, isAuthenticated, combinedLoadingState)\r\n        )}\r\n      </Routes>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default AppInitializer;\r\n"],"names":["config","development","apiUrl","devServer","host","port","production","prod","test","module","exports","require","getUserInfoFromToken","async","token","localStorage","getItem","decodedToken","jwtDecode","currentTime","Date","now","exp","removeItem","axios","get","concat","id","data","userInfo","error","NavBar","dispatch","useDispatch","navigate","useNavigate","role","isAuthenticated","useSelector","state","auth","classIsActive","_ref","isActive","React","className","Link","to","src","alt","NavLink","FontAwesomeIcon","icon","size","onClick","handleLogOut","logout","onSearch","query","setQuery","useState","onSubmit","event","preventDefault","type","placeholder","value","onChange","e","target","BottomBar","getFullYear","TravelToTop","isVisible","setIsVisible","useEffect","toggleVisibility","window","scrollY","addEventListener","removeEventListener","scrollToTop","scrollTo","top","behavior","style","position","bottom","right","backgroundColor","color","border","borderRadius","padding","cursor","boxShadow","zIndex","featuredCategories","Microbiología","backgroundImage","backgroundSize","backgroundPosition","SearchBar","featuredCategoryElements","Object","entries","map","category","url","key","pathname","featuredCategoryRender","Login","loginPasswordVisible","setLoginPasswordVisible","registrationPasswordVisible","setRegistrationPasswordVisible","companyDomains","Google","loginForm","setLoginForm","email","password","registrationForm","setRegistrationForm","username","company","validateEmailDomain","split","passwordRegex","handleLoginChange","name","_objectSpread","handleRegistrationChange","post","setItem","setUserInfo","response","alert","message","toggleLoginPasswordVisibility","fromRegistration","toggleRegistrationPasswordVisibility","useTokenValidation","validateToken","ReactModal","isOpen","handleModalClose","userId","callingComponent","protocolId","protocolTitle","handleSuccesfulProtocolDeletion","item","handleLogout","content","left","marginRight","transform","width","height","overlay","onRequestClose","delete","deleteProtocol","deleteUser","showFavouritesOnly","useParams","location","useLocation","protocols","setProtocols","modalOpen","setModalOpen","currentCategory","setCurrentCategory","areFavourites","setAreFavourites","isLoading","setIsLoading","protocolDeletedId","setProtocolDeletedId","selectedProtocol","setSelectedProtocol","title","noFavouriteProtocolId","setNoFavouriteProtocolId","getButtonClass","deletedProtocolId","handleFavouriteClick","protocol_id","then","prevFavourites","catch","prevProtocols","filter","protocol","URLSearchParams","search","params","favourites","favouriteStatuses","favouriteResponse","isFavourite","console","fetchProtocols","Loading","length","DeletionModal","handleProtocolDeleteClick","objective","EmailSent","AccountManagement","usersList","setUsersList","selectedUser","setSelectedUser","getAllUsers","updateUserRole","newRole","patch","handleError","user","handleRoleChange","handleDeleteClick","users","oldPasswordVisible","setOldPasswordVisible","newPasswordVisible","setNewPasswordVisible","passwordField","setPasswordField","oldPassword","newPassword","emailField","setEmailField","oldEmail","newEmail","usernameField","setUsernameField","newUsername","oldUsername","handlePasswordInput","handleEmailInput","toggleOldPasswordVisibility","toggleNewPasswordVisibility","onDrop","previousImg","preview","setPreview","handleDrop","useCallback","acceptedFiles","file","log","previewUrl","URL","createObjectURL","getRootProps","getInputProps","useDropzone","accept","multiple","noClick","startsWith","revokeObjectURL","_extends","textAlign","marginTop","unitConversionFactors","concentration","molarity","M","mM","µM","nM","x","U","volume","L","mL","µL","nL","concentrationUnitsMatching","initialUnit","finalUnit","unitType","hasOwnProperty","correctConcentrationLogic","initialValue","finalValue","initialFactor","finalFactor","foundInitial","foundFinal","undefined","decimalCommaToDot","num","normalizedNum","toString","lastCommaIndex","lastIndexOf","lastDotIndex","countOccurrences","str","char","numCommas","numDots","replace","parsedNum","parseFloat","isNaN","convertVolumeUnits","fromUnit","toUnit","handleTextInput","prevText","editorContent","setEditorContent","editorRef","useRef","quillRef","isInitialized","current","quill","Quill","theme","modules","toolbar","container","header","list","background","handlers","image","input","document","createElement","setAttribute","click","files","uploadImage","attachImageClickListeners","querySelectorAll","forEach","img","handleImageClick","imgElement","confirm","imgUrl","remove","deleteImageFromServer","img_url","status","Error","clipboard","dangerouslyPasteHTML","on","root","innerHTML","stopPropagation","dataTransfer","range","getSelection","index","getLength","formData","FormData","append","headers","imageUrl","secure_url","insertEmbed","off","disable","ref","display","ProtocolForm","mode","setProtocol","publication_state","info","confidential","youtube_link","featuredImage","setFeaturedImage","previousServerImage","setPreviousServerImage","reactions","setReactions","removeImage","setRemoveImage","setPrevText","featured_image","updateReaction","field","updatedReactions","updateReactiveField","reactionIndex","reactiveIndex","normalizedValue","reactives","resetFormState","concentrationOptions","keys","reduce","acc","volumeOptions","text","prevProtocol","i","reaction","j","reactive","initial_concentration_value","initial_concentration_units","final_concentration_value","final_concentration_units","JSON","stringify","put","required","MyEditor","MyDropzone","step","unit","deleteReactive","_","push","addReactive","reaction_volume_value","reaction_volume_units","solvent","deleteReaction","addReaction","ProtocolsProtocol","componentRef","selectorsToHide","setSelectorsToHide","handlePrint","useHandlePrint","contentRef","useReactToPrint","onBeforeGetContent","Promise","resolve","selector","elements","element","setProperty","setTimeout","onAfterPrint","setUpdatedReactions","eliminate_from_mix","reactive_volume_value","reactive_volume_units","solvent_volume_value","solvent_volume_units","premix_volume_value","premix_volume_units","extra_percent","number_samples","isLoathing","setIsFavourite","printTrigger","setPrintTrigger","mergedReactions","mergeWithDefaults","reactionsFromAPI","recalculateVolumes","updatedReactives","calculatedValue","handleReactiveVolumeCalculation","finalReactiveVolume","toFixed","totalReactiveVolume","total","solventVolumeValue","totalReactiveVolumeSeparate","premixVolumeValue","handleReactionReactiveChange","prevReactions","rIdx","updatedReaction","newVolumeValue","reIdx","extraPercent","numberSamples","reactionVolumeValue","reactionVolumeUnits","initialConcentrationValue","initialConcentrationUnits","finalConcentrationValue","finalConcentrationUnits","normalizedExtraPercent","normalizedNumberSamples","normalizedInitialConcentrationValue","normalizedFinalConcentrationValue","normalizedReactionVolumeValue","reactiveVolumeValue","calculateReactiveVolume","finalVolumeValue","finalVolumeUnits","reactiveVolumeUnits","tableRender","eliminatedFromMix","readOnly","eliminateOrAddReactiveMix","handleDownload","infoToDownload","commonSelectorsToHide","handleEditClick","dangerouslySetInnerHTML","__html","excludedReactives","match","getYouTubeVideoID","frameBorder","allow","referrerPolicy","allowFullScreen","AppInitializer","localAuthLoading","setLocalAuthLoading","authLoading","iconHelper","interceptors","request","use","store","reject","checkAuth","initializeAuth","combinedLoadingState","BrowserRouter","Routes","Route","path","routesGuard","loading","commonRoutes","Home","ProtocolsContainer","nonAuthRoutes","authUserRoutes","authAdminRoutes","UsersManagement","notFoundRoutes","Navigate"],"sourceRoot":""}